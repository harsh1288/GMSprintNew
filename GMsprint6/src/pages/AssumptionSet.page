<apex:page id="page" standardController="Implementation_Period__c" extensions="ctrlAssumptionSet" showHeader="true" sidebar="false">
    <apex:stylesheet value="{!URLFOR($Resource.GoalsJs, 'assets/css/bootstrap.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.GoalsJs, 'assets/css/bootstrap-responsive.css')}"/>
    <apex:includeScript value="{!$Resource.jquery142}" />
    <style>
        .headerRowUpper{
            border:1px solid #E0E3E5 !important;
            font-weight:bold !important;                     
        }       
        .headerRowLower{
            border:1px solid #E0E3E5 !important;
            font-weight:bold !important;
            background-color:#0066BB !important;
            color:white !important;
            white-space: normal !important;            
        }
        .totalRow{
            border-top:1px;
            font-weight:bold !important;
        }
        .TDstyle{
            border:1px solid #E0E3E5 !important;
            vertical-align: top;
        }
        input{
            width: 50px;
        }
        label {
            font-weight: bold;
            display: inherit;
        }
        .pageContent {
            color: #4A4A56; 
            font-size: 0.9em; 
            font-weight: bold; 
            padding-left: 1px;
        }
        .pageTitleIcon {
            margin-top: 5px;
            background-image: url("/img/sprites/master.png");
            background-position: 0 -1058px;
            height: 32px;
            width: 32px;
            display: inline;
            float: left;
            margin-right: 5px;
            margin-left: 10px;
        }
        .pageDescription{
            font-size: 1.8em; 
            font-weight: normal;
            line-height: 1.1em;
        }
        .sidebarMenu{
            width : 270px;
        }
        .custPopup{
            background-color: #ededed;
            border-width: 0px;
            border-radius:10px;
            border-style: solid;
            z-index: 9999;
            left: 50%;
            margin-top:-60px;
            padding:10px;
            position: absolute;
            width:300px;
            height:130px;
        }
        .popupBackground{
            background-color:black;
            opacity: 0.50;
            filter: alpha(opacity = 20);
            position: fixed;
            width: 100%;
            height: 100%;
            z-index: 9998;
            top: 0;
            left: 0;
        }
        
        .custPopupApply{
            background-color: #ededed;
            border-width: 0px;
            border-radius:10px;
            border-style: solid;
            z-index: 9999;
            left: 50%;
            margin-top:-60px;
            padding:10px;
            position: absolute;
            width:366px;
            height:163px;
        }        
        .popupButtonYes{
            background-color: #49C739 !important;
            background-image: none !important;
            color: white !important;
            font-size: 12.9pt !important;
            font-weight: bold !important;
            height: 30px !important;;
            width: 90px !important;;
        }
        .popupButtonCancel{
            background-color: #d82516 !important;
            background-image: none !important;
            color: white !important;
            font-size: 12.9pt !important;
            font-weight: bold !important;
            height: 30px !important;;
            width: 90px !important;;
        }
        .deletePopup{
            background-color: #EDEDED !important;
            border-top: 0px !important;
            text-align:center !important;
        }
        .deletePopupCancel{
            background-color: #EDEDED !important;
            border-top: 0px !important;
            text-align:left !important;
        }
        .TGFbtn-mini{
            margin-top:6px;
        }
        h3{
            font-size:24px;
        }
        .chatterFeedPanel{
            height: 225px !important;
        }  
        .webkitright {
            text-align: right;
            white-space: nowrap;
        };
        .headerSearchContainer {
            margin-top: -20px !important;
        }    
        .phHeaderCustomLogo .headerSearchLeftRoundedCorner {
            margin-top: -20px !important;
        } 
        .table td{
            padding: 5.5px !important;
        }
        .table th{
            padding: 6px !important;
        }
        .th {
            white-space: normal !important;
        }
         .bPageHeader td.left div
    {
      width:260px;
    }
    .bPageHeader .phHeader .left .spacer, .bPageHeader .phHeader td.left {
        width: 0px !important;
    }
    .multiforce #toolbar {
        background-image: none !important;
    }
    </style>
    <script>
      $(document).ready(function () {
          $('label.tree-toggler').click(function () {
              $(this).parent().children('ul.tree').toggle(300);
          });
          
           if ( $.browser.webkit ) {
            $("#phHeaderLogoImage").parents("table").find("td").eq(2).removeClass("right").addClass("webkitright");  
           };
      });
    </script>
        
    <div class="margin20">
    <!--<ul class="breadcrumb">
        <li>
            <a href="{!if($Profile.Name=='PR Standard Portal User','/GM','')}/apex/OpenConceptNotesH" class="link">{!strConceptNotes }</a>
            <span class="divider">/</span>
        </li>
        <li>
            <a href="{!if($Profile.Name=='PR Standard Portal User','/GM','')}/apex/openconceptnotesH?id={!Page__c.Concept_Note__r.CCM_new__r.Country__c}" class="link">{!Page__c.Concept_Note__r.CCM_new__r.Country__r.Name}</a>
            <span class="divider">/</span>
        </li>
        <li>
            {!Module__c.Implementation_Period__r.Name}                    
        </li>
    </ul>-->
    <h3>
        Detailed Assumption Set - {!Implementation_Period__c.Name}
    </h3>
    
    <chatter:feedWithFollowers id="chatterFeed" entityId="{!Implementation_Period__c.Id}"/>
    </div>
    
    <br/>
    <apex:form id="frm">

        <!--<apex:inputHidden value="{!intIndex}" id="hdnIndex"/>-->
        <apex:inputHidden value="{!strLocalCurrencyRate}" id="hdnstrLocalCurrencyRate"/>
        <apex:inputHidden value="{!strGrantCurrencyRate}" id="hdnstrGrantCurrencyRate"/>
        <apex:inputHidden value="{!strOtherCurrencyRate}" id="hdnstrOtherCurrencyRate"/>
              <apex:actionFunction action="{!SaveBudgetLines}" reRender="frm" status="Processing" name="actSaveBudgetLines">
                    <apex:param value="" name="SaveIndex" id="SaveIndex"/>
              </apex:actionFunction>                                                      
               <apex:actionFunction name="actSaveAssumption" action="{!SaveAssumption}" status="Processing" rerender="frm" >
                   <apex:param value="" name="saveClose" id="AssCloseCode"/>
                   <apex:param value="" name="CheckNewLine" id="CheckNewLine"/>
               </apex:actionFunction>
             <!--  <apex:actionFunction name="actSaveAssumptionNew" action="{!SaveAssumptionNew}" status="Processing" rerender="frm" /> --> 
               <apex:actionFunction name="actChangeCurrencyRateFromCode" action="{!ChangeCurrencyRateFromCode}" status="Processing" rerender="frm" oncomplete="showRows(false);"><!--  oncomplete="showRows();" -->
                      <apex:param value="" name="Code" id="Code"/>
                      <apex:param value="" name="ChangeIndex" id="ChangeIndex"/>
                      <apex:param value="" name="isNew" id="isNew"/>
               </apex:actionFunction>
               <apex:actionFunction name="actChangeCurrencyRateFromCodeNew" action="{!ChangeCurrencyRateFromCode}" status="Processing" rerender="frm" oncomplete="showRows(true);"><!--  oncomplete="showRows();" -->
                      <apex:param value="" name="Code" id="Codenew"/>
                      <apex:param value="" name="ChangeIndex" id="ChangeIndexnew"/>
                      <apex:param value="" name="isNew" id="isNewRecord"/>
               </apex:actionFunction>
                <!-- <apex:actionFunction name="actChangeCurrencyRateFromCodeNew" action="{!ChangeCurrencyRateFromCodeNew}" status="Processing" rerender="frm" oncomplete="showRows();">
                      <apex:param value="" name="Code" id="Code1"/>
                </apex:actionFunction> -->
        <div class="containerTGF">
            <br/>
            <apex:commandLink id="cmdLinkSaveGoal" styleClass="TGFbtn TGFbtn-mini TGFbtn-success" action="/apex{!if($Profile.Name=='PR Standard Portal User','/GM','')}/GMDetailedBudget?id={!strModuleId}">
                <strong>Back to Detail Budget</strong>                                            
            </apex:commandLink><br/>   
            <table width="100%">
                <tr>
                    <td valign="top" align="left">
                    <!--<div class="side_menu sidebarMenu">
                            <div class="well" style=" padding: 8px 0;">
                                <div>
                                    <ul class="nav nav-list">
                                        <li>
                                            <div class="tree-toggler nav-header">
                                                <a href="{!if($Profile.Name=='PR Standard Portal User','/GM','')}/apex/grantmakingoverview?id={!strImplementationPeriodId}" class="link">Summary</a>
                                            </div>
                                        </li>
                                        <li class="divider">
                                        </li>
                                        <apex:repeat id="page" value="{!lstPageTodisplay}" var="P">                                        
                                            <li>
                                                <div class="tree-toggler nav-header {!if(P.Id = Module__c.Id,' active ','')} ">
                                                    <a href="/apex/{!P.URL_prefix__c}?id={!P.Id}" class="link">{!P.Name}</a>
                                                </div>
                                            </li>
                                            <li class="divider">
                                            </li>
                                        </apex:repeat>
                                    </ul>
                                </div>
                            </div>
                        </div>-->
                    </td>
                    <td valign="top" class="indicatorSide">      
                         <table class="table table-striped">
                             <thead>
                                <tr class="headerRow">
                                    <th class="headerRowLower" width="10%">
                                        <apex:outputlabel value="Actions"/>
                                    </th>                
                                    <th class="headerRowLower" width="20%" >
                                        <apex:outputlabel value="Assumption Set Name"/>
                                    </th>                
                                    <th class="headerRowLower" width="24%">
                                        <apex:outputlabel value="Cost Input"/>
                                    </th>                
                                    <th class="headerRowLower" width="23%">
                                        <apex:outputlabel value="Number of Budget Lines Using Set"/>
                                    </th>
                                    <th class="headerRowLower" width="13%">
                                        <apex:outputlabel value="Number of Assumptions in Set"/>
                                    </th>
                                    <th style="border:none;" width="10%"></th>                       
                                </tr>
                            </thead>

                            
                            <apex:variable value="{!1}" var="Count"/>
                            <apex:repeat id="rptBudgetLine" value="{!lstwrapAssumptionSet}" var="objBL">
                                <tr>
                                    <td class="dataCell TDstyle" >
                                        <apex:commandLink id="cmdLinkEditGoal" action="{!EditAssumptionRecords}" reRender="frm" Status="Processing" styleClass="TGFbtn TGFbtn-mini TGFbtn-primary"  style="width:30px;height:25px;">
                                            <i class="icon-edit icon-white" style="margin-top:6px"></i>
                                            <apex:param value="{!Count-1}" name="EditIndex" id="EditIndex"/>                                            
                                        </apex:commandLink>
<!------------Start Assumption Popup--------------->
                                        <apex:outputPanel id="tstpopup1">
                                           <apex:outputPanel id="popupBackground1" styleClass="popupAssumptionBackground" rendered="{!objBL.blnHasChild}"/> 
                                            <apex:outputPanel id="custPopup1" styleClass="custAssumptionPopup" rendered="{!objBL.blnHasChild}">
                                                <apex:inputHidden value="{!strSelectedYearAssumption}" id="hdnSelectedYearA"/>  
                                                
                                               <table width="100%">
                                               <tr>
                                              <!--       <th colspan="4" style="text-align:right;display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)','','none')}">
                                                            <div id="NumPersonY1" style="display:if(strSelectedYearAssumption == 'Year1','',none};">
                                                            <apex:outputText value="{!$Label.Y1_Number_of_Persons}"/>
                                                            <apex:inputField id="Y1NumPerson" value="{!objBL.objAssumptionSet.Y1_Number_of_Persons__c}" onchange="OnChangeNumPerson('{!$Component.txtTotalUnitCostY1}','{!$Component.txtTotalUnitCostY2}','{!$Component.txtTotalUnitCostY3}','{!$Component.txtTotalUnitCostY4}','{!$Component.txtUnitCostY1}','{!$Component.txtUnitCostY2}','{!$Component.txtUnitCostY3}','{!$Component.txtUnitCostY4}','{!$Component.Y1NumPerson}','{!$Component.Y2NumPerson}','{!$Component.Y3NumPerson}','{!$Component.Y4NumPerson}');"/>
                                                            </div>
                                                            <div id="NumPersonY2" style="display:none;">
                                                            <apex:outputText value="{!$Label.Y2_Number_of_persons}" />
                                                            <apex:inputField id="Y2NumPerson" value="{!objBL.objAssumptionSet.Y2_Number_of_Persons__c}" onchange="OnChangeNumPerson('{!$Component.txtTotalUnitCostY1}','{!$Component.txtTotalUnitCostY2}','{!$Component.txtTotalUnitCostY3}','{!$Component.txtTotalUnitCostY4}','{!$Component.txtUnitCostY1}','{!$Component.txtUnitCostY2}','{!$Component.txtUnitCostY3}','{!$Component.txtUnitCostY4}','{!$Component.Y1NumPerson}','{!$Component.Y2NumPerson}','{!$Component.Y3NumPerson}','{!$Component.Y4NumPerson}');"/>
                                                            </div>
                                                            <div id="NumPersonY3" style="display:none;">
                                                            <apex:outputText value="{!$Label.Y3_Number_of_persons}" />
                                                            <apex:inputField id="Y3NumPerson" value="{!objBL.objAssumptionSet.Y3_Number_of_Persons__c}" onchange="OnChangeNumPerson('{!$Component.txtTotalUnitCostY1}','{!$Component.txtTotalUnitCostY2}','{!$Component.txtTotalUnitCostY3}','{!$Component.txtTotalUnitCostY4}','{!$Component.txtUnitCostY1}','{!$Component.txtUnitCostY2}','{!$Component.txtUnitCostY3}','{!$Component.txtUnitCostY4}','{!$Component.Y1NumPerson}','{!$Component.Y2NumPerson}','{!$Component.Y3NumPerson}','{!$Component.Y4NumPerson}');"/>
                                                            </div>
                                                            <div id="NumPersonY4" style="display:none;">
                                                            <apex:outputText value="{!$Label.Y4_Number_of_persons}" />
                                                            <apex:inputField id="Y4NumPerson" value="{!objBL.objAssumptionSet.Y4_Number_of_Persons__c}" onchange="OnChangeNumPerson('{!$Component.txtTotalUnitCostY1}','{!$Component.txtTotalUnitCostY2}','{!$Component.txtTotalUnitCostY3}','{!$Component.txtTotalUnitCostY4}','{!$Component.txtUnitCostY1}','{!$Component.txtUnitCostY2}','{!$Component.txtUnitCostY3}','{!$Component.txtUnitCostY4}','{!$Component.Y1NumPerson}','{!$Component.Y2NumPerson}','{!$Component.Y3NumPerson}','{!$Component.Y4NumPerson}');"/>
                                                            </div>
                                                           <!-- <apex:inputText value="{!objBL.NumberOfPersons}"/> --> 
                                                     <!--  </th> -->
                                                 </tr>
                                                </table>
                                                        <table width="100%" cellspacing="0" cellsspacing="0" border="0" class="list">
                                                    <thead class="rich-table-thead">
                                                        <tr class="headerRow">
                                                            <th width="50%"></th>
                                                            <th class="headerRowUpper" id="MainThYear1A" style="color:{!if(strSelectedYearAssumption == 'Year1','#FFFFFF','#00688B')};text-decoration:{!if(strSelectedYearAssumption != 'Year1','underline','')};background-color:{!if(strSelectedYearAssumption == 'Year1','#434445','#DFEFF0')};" onclick="return displayYearToggleAssumption('MainThYear1A','{!$Component.hdnSelectedYearA}','Year1','Year1thA','Year1tdA',{!objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '1. Human Resources (HR)'},{!objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)'});">
                                                                <apex:outputlabel value="{!YEAR(GIPstartdate)}" styleclass="link"/>
                                                            </th>                
                                                            <th class="headerRowUpper" id="MainThYear2A" style="color:{!if(strSelectedYearAssumption == 'Year2','#FFFFFF','#00688B')};text-decoration:{!if(strSelectedYearAssumption != 'Year2','underline','')};background-color:{!if(strSelectedYearAssumption == 'Year2','#7D9C9F','#E7F2D5')};" onclick="return displayYearToggleAssumption('MainThYear2A','{!$Component.hdnSelectedYearA}','Year2','Year2thA','Year2tdA',{!objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '1. Human Resources (HR)'},{!objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)'});">
                                                                <apex:outputlabel value="{!YEAR(GIPstartdate)+1}" styleclass="link"/>
                                                            </th>                
                                                            <th class="headerRowUpper" id="MainThYear3A" style="color:{!if(strSelectedYearAssumption == 'Year3','#FFFFFF','#00688B')};text-decoration:{!if(strSelectedYearAssumption != 'Year3','underline','')};background-color:{!if(strSelectedYearAssumption == 'Year3','#7D9C9F','#FAF3CA')};" onclick="return displayYearToggleAssumption('MainThYear3A','{!$Component.hdnSelectedYearA}','Year3','Year3thA','Year3tdA',{!objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '1. Human Resources (HR)'},{!objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)'});">
                                                                <apex:outputlabel value="{!YEAR(GIPstartdate)+2}" styleclass="link"/>
                                                            </th>               
                                                            <th class="headerRowUpper" id="MainThYear4A" style="color:{!if(strSelectedYearAssumption == 'Year4','#FFFFFF','#00688B')};text-decoration:{!if(strSelectedYearAssumption != 'Year4','underline','')};background-color:{!if(strSelectedYearAssumption == 'Year4','#7D9C9F','#F0E1E2')};display:{!if(YEAR(GIPstartdate)+3 <= YEAR(GIPenddate),'','none')}" onclick="return displayYearToggleAssumption('MainThYear4A','{!$Component.hdnSelectedYearA}','Year4','Year4thA','Year4tdA',{!objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '1. Human Resources (HR)'},{!objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)'});">
                                                                <apex:outputlabel value="{!YEAR(GIPstartdate)+3}" styleclass="link"/>
                                                            </th>
                                                        </tr>
                                                    </thead> 
                                                </table>                                                
                                                <apex:outputpanel rendered="{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c != '1. Human Resources (HR)',true,false)}">
                                                <table width="90%" class="table table-striped" style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c != '1. Human Resources (HR)','','none')};">
                                                     <thead>
                                                        <tr class="headerRow">
                                                            <th width="5%"></th>
                                                            <th class="headerRowLower" width="11%">
                                                                <apex:outputlabel value="{!$Label.Item_Description}"/>
                                                            </th>                
                                                            <th class="headerRowLower" width="15%">
                                                                <apex:outputlabel value="{!$Label.Currency}"/>
                                                            </th>                
                                                            <th class="headerRowLower" width="10%">
                                                                <apex:outputlabel value="{!$Label.Unit_of_Measure}"/>
                                                            </th>  
                                                                          
                                                            <th id="Year1thA" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};" class="headerRowLower" width="13%">
                                                                <apex:outputlabel value="{!$Label.Y1_Unit_Cost}"/>
                                                            </th>
                                                             <th id="DurationTh1" class="headerRowLower" style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)' && strSelectedYearAssumption == 'Year1','','none')}">
                                                                <apex:outputlabel value="{!$Label.Y1_Duration}"/>
                                                            </th>
                                                            <th id="Year1thA" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};" class="headerRowLower" width="13%">
                                                                <apex:outputlabel value="{!$Label.Y1_Quantity}"/>
                                                            </th> 
                                                            <th id="DurationTh1" class="headerRowLower" style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)' && strSelectedYearAssumption == 'Year1','','none')}">
                                                                <apex:outputlabel value="{!$Label.Y1_Number_of_Persons}"/>
                                                            </th>               
                                                            <th id="Year1thA" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};" class="headerRowLower" width="13%">
                                                                <apex:outputlabel value="{!$Label.Y1_Total_Cost}"/>
                                                            </th>  
                                                            
                                                            <th id="Year2thA" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};" class="headerRowLower" width="13%">
                                                                <apex:outputlabel value="{!$Label.Y2_Unit_Cost}"/>
                                                            </th>
                                                            <th id="DurationTh2" class="headerRowLower" style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)' && strSelectedYearAssumption == 'Year2','','none')}">
                                                                <apex:outputlabel value="{!$Label.Y2_Duration_days}"/>
                                                            </th>
                                                            <th id="Year2thA" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};" class="headerRowLower" width="13%">
                                                                <apex:outputlabel value="{!$Label.Y2_Quantity}"/>
                                                            </th> 
                                                            <th id="DurationTh2" class="headerRowLower" style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)' && strSelectedYearAssumption == 'Year2','','none')}">
                                                                <apex:outputlabel value="{!$Label.Y2_Number_of_persons}"/>
                                                            </th>                
                                                            <th id="Year2thA" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};" class="headerRowLower" width="13%">
                                                                <apex:outputlabel value="{!$Label.Y2_Total_Cost}"/>
                                                            </th>
                                                            
                                                            <th id="Year3thA" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};" class="headerRowLower" width="13%">
                                                                <apex:outputlabel value="{!$Label.Y3_Unit_Cost}"/>
                                                            </th>
                                                            <th id="DurationTh3" class="headerRowLower" style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)' && strSelectedYearAssumption == 'Year3','','none')}">
                                                                <apex:outputlabel value="{!$Label.Y3_Duration_days}"/>
                                                            </th>
                                                            <th id="Year3thA" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};" class="headerRowLower" width="13%">
                                                                <apex:outputlabel value="{!$Label.Y3_Quantity}"/>
                                                            </th>     
                                                            <th id="DurationTh3" class="headerRowLower" style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)' && strSelectedYearAssumption == 'Year3','','none')}">
                                                                <apex:outputlabel value="{!$Label.Y3_Number_of_persons}"/>
                                                            </th>            
                                                            <th id="Year3thA" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};" class="headerRowLower" width="13%">
                                                                <apex:outputlabel value="{!$Label.Y3_Total_Cost}"/>
                                                            </th>
                                                            
                                                            <th id="Year4thA" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};" class="headerRowLower" width="13%">
                                                                <apex:outputlabel value="{!$Label.Y4_Unit_Cost}"/>
                                                            </th>
                                                            <th id="DurationTh4" class="headerRowLower" style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)' && strSelectedYearAssumption == 'Year4','','none')}">
                                                                <apex:outputlabel value="{!$Label.Y4_Duration_days}"/>
                                                            </th>
                                                            <th id="Year4thA" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};" class="headerRowLower" width="13%">
                                                                <apex:outputlabel value="{!$Label.Y4_Quantity}"/>
                                                            </th>    
                                                            <th id="DurationTh4" class="headerRowLower" style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)' && strSelectedYearAssumption == 'Year4','','none')}">
                                                                <apex:outputlabel value="{!$Label.Y4_Number_of_persons}"/>
                                                            </th>             
                                                            <th id="Year4thA" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};" class="headerRowLower" width="13%">
                                                                <apex:outputlabel value="{!$Label.Y4_Total_Cost}"/>
                                                            </th>
                                                                          
                                                            <th class="headerRowLower" width="10%">
                                                                <apex:outputlabel value="{!$Label.Assumptions_to_Support_Unit_Cost}"/>
                                                            </th>
                                                            <th class="headerRowLower" width="10%">
                                                                <apex:outputlabel value="{!$Label.Justification_Comments}"/>
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <apex:variable value="{!0}" var="CountAssumption"/>
                                                    <apex:repeat id="rptBudgetLine" value="{!objBL.lstAssumptions}" var="objA">
                                                        <tr>
                                                            <td>
                                                                <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-danger" style="width:30px;height:25px;margin-top:6px;" onclick="return openAssumptionDeletePopup('{!$Component.tstpopup1}');" rendered="{!blnEdit}">
                                                                    <i class="icon-trash icon-white" style="margin-top:6px"></i> 
                                                                </apex:commandLink>
                                                                <apex:outputPanel id="tstpopup1" style="display:none;">
                                                                    <apex:outputPanel id="popupBackground1" styleClass="popupBackground"/>
                                                                    <apex:outputPanel id="custPopup1" styleClass="custPopup">
                                                                        <table width="100%" cellspacing="0" cellpadding="0" border="0" >
                                                                            <tr>
                                                                                <td colspan="3" class="deletePopup">
                                                                                    <apex:outputtext style="color:#6590c4; font-size: 13.9pt;font-weight: bold;" value="Are you sure?"/>
                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td colspan="3" class="deletePopup">
                                                                                    <apex:outputtext style="color:#6590c4; font-size: 13.9pt;font-weight: bold;" value="This Assumption will be deleted."/>
                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td width="47%" class="deletePopup">
                                                                                    <apex:commandButton styleClass="popupButtonYes" value="Yes" action="{!DeleteAssumption}" reRender="frm,tstpopup1" status="Processing">
                                                                                        <apex:param value="{!CountAssumption}" name="DeleteIndex"/>
                                                                                    </apex:commandButton>
                                                                                </td>
                                                                                <td width="6%" class="deletePopup"></td>
                                                                                <td width="47%" align="left" class="deletePopupCancel">
                                                                                    <apex:commandButton styleClass="popupButtonCancel" value="Cancel" onclick="return CloseAssumptionPopup('{!$Component.tstpopup1}');" />
                                                                                </td>
                                                                            </tr>
                                                                        </table>
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                            </td>
                                                       
                                                        <td class="dataCell TDstyle">
                                                                <apex:inputField value="{!objA.objAssumption.Item_Description__c}" style="height: 19px;resize:none"/>
                                                            </td>
                                                            <td class="dataCell TDstyle">
                                                                <apex:selectList id="txtCurrencyUsed" value="{!objA.strCurrencyUsedAssumption}" size="1" style="width:101px" onchange="return ChangeCurrencyRate(this.value,'{!CountAssumption}','false');">
                                                                    <apex:selectOptions value="{!AllIPCurrencyOptions}"></apex:selectOptions>
                                                                </apex:selectList>
                                                            </td>
                                                            <td class="dataCell TDstyle">
                                                                 <apex:outputField id="AssUoM" value="{!objA.objAssumption.Unit_of_Measure__c}" style="height: 19px;resize:none;width:130px;"/> 
                                                               <!-- < <apex:outputText value="{!objBL.strUnitCostMeasure}"/>-->
                                                               
                                                            </td>
                                                            
                                                            <td id="Year1tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                                <apex:inputField id="txtY1UnitCost" value="{!objA.objAssumption.Y1_Unit_Cost_Payment_Currency__c}" onchange="CalculateTotalCost('1','{!$Component.txtY1UnitCost}','{!$Component.txtY1DurationDays}','{!$Component.txtY1Quantity}','{!$Component.txtTotalCostY1}','{!$Component.txtRateY1}','{!$Component.txtCurrencyUsed}','{!Count-1}',{!objBL.lstAssumptions.size},{!objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)'},'{!$Component.txtY1NumofPerson}');"/>
                                                            </td>
                                                            <td id="DurationTd1" class="dataCell TDstyle" style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)' && strSelectedYearAssumption == 'Year1','','none')}">
                                                                <apex:inputField id="txtY1DurationDays" value="{!objA.objAssumption.Y1_Duration_Days__c}" onchange="CalculateTotalCost('1','{!$Component.txtY1UnitCost}','{!$Component.txtY1DurationDays}','{!$Component.txtY1Quantity}','{!$Component.txtTotalCostY1}','{!$Component.txtRateY1}','{!$Component.txtCurrencyUsed}','{!Count-1}',{!objBL.lstAssumptions.size},{!objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)'},'{!$Component.txtY1NumofPerson}');"/>
                                                            </td>
                                                            <td id="Year1tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                                <apex:inputField id="txtY1Quantity" value="{!objA.objAssumption.Y1_Quantity__c}" onchange="CalculateTotalCost('1','{!$Component.txtY1UnitCost}','{!$Component.txtY1DurationDays}','{!$Component.txtY1Quantity}','{!$Component.txtTotalCostY1}','{!$Component.txtRateY1}','{!$Component.txtCurrencyUsed}','{!Count-1}',{!objBL.lstAssumptions.size},{!objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)'},'{!$Component.txtY1NumofPerson}');"/>
                                                            </td>
                                                            <td id="DurationTd1" class="dataCell TDstyle" style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)' && strSelectedYearAssumption == 'Year1','','none')}">
                                                                <apex:inputField id="txtY1NumofPerson" value="{!objA.objAssumption.Y1_Number_of_Persons__c}" onchange="CalculateTotalCost('1','{!$Component.txtY1UnitCost}','{!$Component.txtY1DurationDays}','{!$Component.txtY1Quantity}','{!$Component.txtTotalCostY1}','{!$Component.txtRateY1}','{!$Component.txtCurrencyUsed}','{!Count-1}',{!objBL.lstAssumptions.size},{!objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)'},'{!$Component.txtY1NumofPerson}');"/>
                                                            </td>
                                                            <td id="Year1tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                                <apex:outputText id="txtTotalCostY1" value="{0,number,##,###,##0.00({!objA.strAssumptionCurrency})}">
                                                                    <apex:param value="{!objA.TotalCostY1}"/>
                                                                </apex:outputText>
                                                                <br/>
                                                                <apex:outputText id="txtRateY1" value="{0,number,##,###,##0.00({!strGrantCurrency})}">
                                                                    <apex:param value="{!objA.CurrencyRateInUSDY1}"/>
                                                                </apex:outputText>                                                          
                                                            </td>
                                                            
                                                            <td id="Year2tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                                <apex:inputField id="txtY2UnitCost" value="{!objA.objAssumption.Y2_Unit_Cost_Payment_Currency__c}" onchange="CalculateTotalCost('2','{!$Component.txtY2UnitCost}','{!$Component.txtY2DurationDays}','{!$Component.txtY2Quantity}','{!$Component.txtTotalCostY2}','{!$Component.txtRateY2}','{!$Component.txtCurrencyUsed}','{!Count-1}',{!objBL.lstAssumptions.size},{!objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)'},'{!$Component.txtY2NumofPerson}');"/>
                                                            </td>
                                                            <td id="DurationTd2" class="dataCell TDstyle" style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)' && strSelectedYearAssumption == 'Year2','','none')}">
                                                                <apex:inputField id="txtY2DurationDays" value="{!objA.objAssumption.Y2_Duration_Days__c}" onchange="CalculateTotalCost('2','{!$Component.txtY2UnitCost}','{!$Component.txtY2DurationDays}','{!$Component.txtY2Quantity}','{!$Component.txtTotalCostY2}','{!$Component.txtRateY2}','{!$Component.txtCurrencyUsed}','{!Count-1}',{!objBL.lstAssumptions.size},{!objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)'},'{!$Component.txtY2NumofPerson}');"/>
                                                            </td>
                                                            <td id="Year2tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                                <apex:inputField id="txtY2Quantity" value="{!objA.objAssumption.Y2_Quantity__c}" onchange="CalculateTotalCost('2','{!$Component.txtY2UnitCost}','{!$Component.txtY2DurationDays}','{!$Component.txtY2Quantity}','{!$Component.txtTotalCostY2}','{!$Component.txtRateY2}','{!$Component.txtCurrencyUsed}','{!Count-1}',{!objBL.lstAssumptions.size},{!objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)'},'{!$Component.txtY2NumofPerson}');"/>
                                                            </td>
                                                            <td id="DurationTd2" class="dataCell TDstyle" style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)' && strSelectedYearAssumption == 'Year2','','none')}">
                                                                <apex:inputField id="txtY2NumofPerson" value="{!objA.objAssumption.Y2_Number_of_Persons__c}" onchange="CalculateTotalCost('2','{!$Component.txtY2UnitCost}','{!$Component.txtY2DurationDays}','{!$Component.txtY2Quantity}','{!$Component.txtTotalCostY2}','{!$Component.txtRateY2}','{!$Component.txtCurrencyUsed}','{!Count-1}',{!objBL.lstAssumptions.size},{!objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)'},'{!$Component.txtY2NumofPerson}');"/>
                                                            </td>
                                                            <td id="Year2tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                                <apex:outputText id="txtTotalCostY2" value="{0,number,##,###,##0.00({!objA.strAssumptionCurrency})}">
                                                                    <apex:param value="{!objA.TotalCostY2}"/>
                                                                </apex:outputText>
                                                                <br/><apex:outputText id="txtRateY2" value="{0,number,##,###,##0.00({!strGrantCurrency})}">
                                                                    <apex:param value="{!objA.CurrencyRateInUSDY2}"/>
                                                                </apex:outputText>
                                                            </td>
                                                            
                                                            <td id="Year3tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                                <apex:inputField id="txtY3UnitCost" value="{!objA.objAssumption.Y3_Unit_Cost_Payment_Currency__c}" onchange="CalculateTotalCost('3','{!$Component.txtY3UnitCost}','{!$Component.txtY3DurationDays}','{!$Component.txtY3Quantity}','{!$Component.txtTotalCostY3}','{!$Component.txtRateY3}','{!$Component.txtCurrencyUsed}','{!Count-1}',{!objBL.lstAssumptions.size},{!objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)'},'{!$Component.txtY3NumofPerson}');"/>
                                                            </td>
                                                            <td id="DurationTd3" class="dataCell TDstyle" style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)' && strSelectedYearAssumption == 'Year3','','none')}">
                                                                <apex:inputField id="txtY3DurationDays" value="{!objA.objAssumption.Y3_Duration_Days__c}" onchange="CalculateTotalCost('3','{!$Component.txtY3UnitCost}','{!$Component.txtY3DurationDays}','{!$Component.txtY3Quantity}','{!$Component.txtTotalCostY3}','{!$Component.txtRateY3}','{!$Component.txtCurrencyUsed}','{!Count-1}',{!objBL.lstAssumptions.size},{!objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)'},'{!$Component.txtY3NumofPerson}');"/>
                                                            </td>
                                                            <td id="Year3tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                                <apex:inputField id="txtY3Quantity" value="{!objA.objAssumption.Y3_Quantity__c}" onchange="CalculateTotalCost('3','{!$Component.txtY3UnitCost}','{!$Component.txtY3DurationDays}','{!$Component.txtY3Quantity}','{!$Component.txtTotalCostY3}','{!$Component.txtRateY3}','{!$Component.txtCurrencyUsed}','{!Count-1}',{!objBL.lstAssumptions.size},{!objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)'},'{!$Component.txtY3NumofPerson}');"/>
                                                            </td>
                                                            <td id="DurationTd3" class="dataCell TDstyle" style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)' && strSelectedYearAssumption == 'Year3','','none')}">
                                                                <apex:inputField id="txtY3NumofPerson" value="{!objA.objAssumption.Y3_Number_of_Persons__c}" onchange="CalculateTotalCost('3','{!$Component.txtY3UnitCost}','{!$Component.txtY3DurationDays}','{!$Component.txtY3Quantity}','{!$Component.txtTotalCostY3}','{!$Component.txtRateY3}','{!$Component.txtCurrencyUsed}','{!Count-1}',{!objBL.lstAssumptions.size},{!objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)'},'{!$Component.txtY3NumofPerson}');"/>
                                                            </td>
                                                            <td id="Year3tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                                <apex:outputText id="txtTotalCostY3" value="{0,number,##,###,##0.00({!objA.strAssumptionCurrency})}">
                                                                    <apex:param value="{!objA.TotalCostY3}"/>
                                                                </apex:outputText>
                                                                <br/><apex:outputText id="txtRateY3" value="{0,number,##,###,##0.00({!strGrantCurrency})}">
                                                                    <apex:param value="{!objA.CurrencyRateInUSDY3}"/> 
                                                                </apex:outputText>
                                                            </td>
                                                            
                                                            <td id="Year4tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                                <apex:inputField id="txtY4UnitCost" value="{!objA.objAssumption.Y4_Unit_Cost_Payment_Currency__c}" onchange="CalculateTotalCost('4','{!$Component.txtY4UnitCost}','{!$Component.txtY4DurationDays}','{!$Component.txtY4Quantity}','{!$Component.txtTotalCostY4}','{!$Component.txtRateY4}','{!$Component.txtCurrencyUsed}','{!Count-1}',{!objBL.lstAssumptions.size},{!objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)'},'{!$Component.txtY4NumofPerson}');"/>
                                                            </td>
                                                            <td id="DurationTd4" class="dataCell TDstyle" style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)' && strSelectedYearAssumption == 'Year4','','none')}">
                                                                <apex:inputField id="txtY4DurationDays" value="{!objA.objAssumption.Y4_Duration_Days__c}" onchange="CalculateTotalCost('4','{!$Component.txtY4UnitCost}','{!$Component.txtY4DurationDays}','{!$Component.txtY4Quantity}','{!$Component.txtTotalCostY4}','{!$Component.txtRateY4}','{!$Component.txtCurrencyUsed}','{!Count-1}',{!objBL.lstAssumptions.size},{!objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)'},'{!$Component.txtY4NumofPerson}');"/>
                                                            </td>
                                                            <td id="Year4tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                                <apex:inputField id="txtY4Quantity" value="{!objA.objAssumption.Y4_Quantity__c}" onchange="CalculateTotalCost('4','{!$Component.txtY4UnitCost}','{!$Component.txtY4DurationDays}','{!$Component.txtY4Quantity}','{!$Component.txtTotalCostY4}','{!$Component.txtRateY4}','{!$Component.txtCurrencyUsed}','{!Count-1}',{!objBL.lstAssumptions.size},{!objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)'},'{!$Component.txtY4NumofPerson}');"/>
                                                            </td>
                                                            <td id="DurationTd4" class="dataCell TDstyle" style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)' && strSelectedYearAssumption == 'Year4','','none')}">
                                                                <apex:inputField id="txtY4NumofPerson" value="{!objA.objAssumption.Y4_Number_of_Persons__c}" onchange="CalculateTotalCost('4','{!$Component.txtY4UnitCost}','{!$Component.txtY4DurationDays}','{!$Component.txtY4Quantity}','{!$Component.txtTotalCostY4}','{!$Component.txtRateY4}','{!$Component.txtCurrencyUsed}','{!Count-1}',{!objBL.lstAssumptions.size},{!objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)'},'{!$Component.txtY4NumofPerson}');"/>
                                                            </td>
                                                            <td id="Year4tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                                <apex:outputText id="txtTotalCostY4" value="{0,number,##,###,##0.00({!objA.strAssumptionCurrency})}">
                                                                    <apex:param value="{!objA.TotalCostY4}"/>
                                                                </apex:outputText>
                                                                <br/><apex:outputText id="txtRateY4" value="{0,number,##,###,##0.00({!strGrantCurrency})}">
                                                                    <apex:param value="{!objA.CurrencyRateInUSDY4}"/>
                                                                </apex:outputText>
                                                            </td>
                                                            
                                                            <td class="dataCell TDstyle">
                                                                <apex:inputField value="{!objA.objAssumption.Assumptions_to_Support_Unit_Cost__c}" style="width:180px;"/>
                                                            </td>
                                                            <td class="dataCell TDstyle">
                                                                <apex:inputField value="{!objA.objAssumption.Justifications_Comments__c}" style="height: 19px;resize:none;width:130px;"/>
                                                            </td>
                                                        </tr>
                                                        <apex:variable value="{!CountAssumption+1}" var="CountAssumption"/>
                                                    </apex:repeat>
                                                    
                                                    <tr id="NewAssumptionTR{!Count}" style="display:none;">
                                                        <td>
                                                            <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-danger" style="width:30px;height:25px;margin-top:6px;" onclick="return CancelAssumption('NewAssumptionTR{!Count}','AddButtonTD{!Count}','AddButtonTDHide{!Count}','{!Count-1}','{!objBL.lstAssumptions.size}');">
                                                                <i class="icon-trash icon-white" style="margin-top:6px"></i> 
                                                            </apex:commandLink>
                                                        </td>
                                                        <td class="dataCell TDstyle">
                                                            <apex:inputField id="idItemDecNew" value="{!objNewAssumption.objAssumption.Item_Description__c}" style="height: 19px;resize:none"/>
                                                        </td>
                                                        <td class="dataCell TDstyle">
                                                            <apex:selectList id="txtCurrencyUsedNew" value="{!objNewAssumption.strCurrencyUsedAssumption}" size="1" style="width:101px" onchange="ChangeCurrencyRate(this.value,'{!CountAssumption}','true');">
                                                                <apex:selectOptions value="{!AllIPCurrencyOptions}"></apex:selectOptions>
                                                            </apex:selectList>
                                                        </td>
                                                        <td class="dataCell TDstyle">
                                                             <apex:outputField id="idUnitMeasureNew" value="{!objNewAssumption.objAssumption.Unit_of_Measure__c}" style="height: 19px;resize:none;width:130px;"/> 
                                                            <!-- <apex:outputText id="txtUnitMeasureAss1" value="{!objBL.strUnitCostMeasure}"/> -->
                                                        </td>
                                                        <td id="Year1tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                            <apex:inputField id="txtY1UnitCostNew" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};" value="{!objNewAssumption.objAssumption.Y1_Unit_Cost_Payment_Currency__c}" onchange="CalculateTotalCostNew('1','{!$Component.txtY1UnitCostNew}','{!$Component.txtY1DurationDaysNew}','{!$Component.txtY1QuantityNew}','{!$Component.txtTotalCostY1New}','{!$Component.txtCurrencyUsedNew}','{!$Component.txtRateY1New}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'{!$Component.txtY1NumOfPersonsNew}');"/>
                                                        </td>                                                        
 
                                                        <td id="DurationTd1" class="dataCell TDstyle" style="display:{!if((objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)' && strSelectedYearAssumption == 'Year1'),'','none')};">
                                                            <apex:inputField id="txtY1DurationDaysNew" value="{!objNewAssumption.objAssumption.Y1_Duration_Days__c}" onchange="CalculateTotalCostNew('1','{!$Component.txtY1UnitCostNew}','{!$Component.txtY1DurationDaysNew}','{!$Component.txtY1QuantityNew}','{!$Component.txtTotalCostY1New}','{!$Component.txtCurrencyUsedNew}','{!$Component.txtRateY1New}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'{!$Component.txtY1NumOfPersonsNew}');"/>
                                                        </td>
                                                        <td id="Year1tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                            <apex:inputField id="txtY1QuantityNew"  value="{!objNewAssumption.objAssumption.Y1_Quantity__c}" onchange="CalculateTotalCostNew('1','{!$Component.txtY1UnitCostNew}','{!$Component.txtY1DurationDaysNew}','{!$Component.txtY1QuantityNew}','{!$Component.txtTotalCostY1New}','{!$Component.txtCurrencyUsedNew}','{!$Component.txtRateY1New}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'{!$Component.txtY1NumOfPersonsNew}');"/>
                                                        </td>
                                                        <td id="DurationTd1" class="dataCell TDstyle" style="display:{!if((objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)' && strSelectedYearAssumption == 'Year1'),'','none')};">
                                                            <apex:inputField id="txtY1NumOfPersonsNew" value="{!objNewAssumption.objAssumption.Y1_Number_of_Persons__c}" onchange="CalculateTotalCostNew('1','{!$Component.txtY1UnitCostNew}','{!$Component.txtY1DurationDaysNew}','{!$Component.txtY1QuantityNew}','{!$Component.txtTotalCostY1New}','{!$Component.txtCurrencyUsedNew}','{!$Component.txtRateY1New}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'{!$Component.txtY1NumOfPersonsNew}');"/>
                                                        </td>
                                                        <td  id="Year1tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                            <apex:outputText id="txtTotalCostY1New" value="{0,number,##,###,##0.00({!objNewAssumption.strAssumptionCurrency})}">
                                                                <apex:param value="{!objNewAssumption.TotalCostY1}" />
                                                            </apex:outputText>
                                                            <br/><apex:outputText id="txtRateY1New" value="{0,number,##,###,##0.00({!strGrantCurrency})}">
                                                                <apex:param value="{!objNewAssumption.CurrencyRateInUSDY1}"/>
                                                            </apex:outputText>
                                                        </td>  
 
                                                        <td id="Year2tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};" >
                                                            <apex:inputField id="txtY2UnitCostNew" value="{!objNewAssumption.objAssumption.Y2_Unit_Cost_Payment_Currency__c}" onchange="CalculateTotalCostNew('2','{!$Component.txtY2UnitCostNew}','{!$Component.txtY2DurationDaysNew}','{!$Component.txtY2QuantityNew}','{!$Component.txtTotalCostY2New}','{!$Component.txtCurrencyUsedNew}','{!$Component.txtRateY2New}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'{!$Component.txtY2NumOfPersonsNew}');"/>
                                                        </td>                                                        
                                                        <td id="DurationTd2" class="dataCell TDstyle" style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)' && strSelectedYearAssumption == 'Year2','','none')};">
                                                            <apex:inputField id="txtY2DurationDaysNew" value="{!objNewAssumption.objAssumption.Y2_Duration_Days__c}" onchange="CalculateTotalCostNew('2','{!$Component.txtY2UnitCostNew}','{!$Component.txtY2DurationDaysNew}','{!$Component.txtY2QuantityNew}','{!$Component.txtTotalCostY2New}','{!$Component.txtCurrencyUsedNew}','{!$Component.txtRateY2New}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'{!$Component.txtY2NumOfPersonsNew}');"/>
                                                        </td>
                                                        <td id="Year2tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                            <apex:inputField id="txtY2QuantityNew" value="{!objNewAssumption.objAssumption.Y2_Quantity__c}" onchange="CalculateTotalCostNew('2','{!$Component.txtY2UnitCostNew}','{!$Component.txtY2DurationDaysNew}','{!$Component.txtY2QuantityNew}','{!$Component.txtTotalCostY2New}','{!$Component.txtCurrencyUsedNew}','{!$Component.txtRateY2New}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'{!$Component.txtY2NumOfPersonsNew}');"/>
                                                        </td>
                                                        <td id="DurationTd2" class="dataCell TDstyle" style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)' && strSelectedYearAssumption == 'Year2','','none')};">
                                                            <apex:inputField id="txtY2NumOfPersonsNew" value="{!objNewAssumption.objAssumption.Y2_Number_of_Persons__c}" onchange="CalculateTotalCostNew('2','{!$Component.txtY2UnitCostNew}','{!$Component.txtY2DurationDaysNew}','{!$Component.txtY2QuantityNew}','{!$Component.txtTotalCostY2New}','{!$Component.txtCurrencyUsedNew}','{!$Component.txtRateY2New}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'{!$Component.txtY2NumOfPersonsNew}');"/>
                                                        </td>
                                                        <td id="Year2tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                            <apex:outputText id="txtTotalCostY2New" value="{0,number,##,###,##0.00({!objNewAssumption.strAssumptionCurrency})}">
                                                                <apex:param value="{!objNewAssumption.TotalCostY2}" />
                                                            </apex:outputText>
                                                            <br/><apex:outputText id="txtRateY2New" value="{0,number,##,###,##0.00({!strGrantCurrency})}">
                                                                <apex:param value="{!objNewAssumption.CurrencyRateInUSDY2}"/>
                                                            </apex:outputText>
                                                        </td>    
 
                                                        <td id="Year3tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                            <apex:inputField id="txtY3UnitCostNew" value="{!objNewAssumption.objAssumption.Y3_Unit_Cost_Payment_Currency__c}" onchange="CalculateTotalCostNew('3','{!$Component.txtY3UnitCostNew}','{!$Component.txtY3DurationDaysNew}','{!$Component.txtY3QuantityNew}','{!$Component.txtTotalCostY3New}','{!$Component.txtCurrencyUsedNew}','{!$Component.txtRateY3New}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'{!$Component.txtY3NumOfPersonsNew}');"/>
                                                        </td>                                                        
                                                        <td id="DurationTd3" class="dataCell TDstyle" style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)' && strSelectedYearAssumption == 'Year3','','none')};">
                                                            <apex:inputField id="txtY3DurationDaysNew" value="{!objNewAssumption.objAssumption.Y3_Duration_Days__c}" onchange="CalculateTotalCostNew('3','{!$Component.txtY3UnitCostNew}','{!$Component.txtY3DurationDaysNew}','{!$Component.txtY3QuantityNew}','{!$Component.txtTotalCostY3New}','{!$Component.txtCurrencyUsedNew}','{!$Component.txtRateY3New}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'{!$Component.txtY3NumOfPersonsNew}');"/>
                                                        </td>
                                                        <td id="Year3tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                            <apex:inputField id="txtY3QuantityNew" value="{!objNewAssumption.objAssumption.Y3_Quantity__c}" onchange="CalculateTotalCostNew('3','{!$Component.txtY3UnitCostNew}','{!$Component.txtY3DurationDaysNew}','{!$Component.txtY3QuantityNew}','{!$Component.txtTotalCostY3New}','{!$Component.txtCurrencyUsedNew}','{!$Component.txtRateY3New}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'{!$Component.txtY3NumOfPersonsNew}');"/>
                                                        </td>
                                                        <td id="DurationTd3" class="dataCell TDstyle" style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)' && strSelectedYearAssumption == 'Year3','','none')};">
                                                            <apex:inputField id="txtY3NumOfPersonsNew" value="{!objNewAssumption.objAssumption.Y3_Number_of_Persons__c}" onchange="CalculateTotalCostNew('3','{!$Component.txtY3UnitCostNew}','{!$Component.txtY3DurationDaysNew}','{!$Component.txtY3QuantityNew}','{!$Component.txtTotalCostY3New}','{!$Component.txtCurrencyUsedNew}','{!$Component.txtRateY3New}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'{!$Component.txtY3NumOfPersonsNew}');"/>
                                                        </td>
                                                        <td id="Year3tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                            <apex:outputText id="txtTotalCostY3New" value="{0,number,##,###,##0.00({!objNewAssumption.strAssumptionCurrency})}">
                                                                <apex:param value="{!objNewAssumption.TotalCostY3}" />
                                                            </apex:outputText>
                                                            <br/><apex:outputText id="txtRateY3New" value="{0,number,##,###,##0.00({!strGrantCurrency})}">
                                                                <apex:param value="{!objNewAssumption.CurrencyRateInUSDY3}"/>
                                                            </apex:outputText>
                                                        </td>    
 
                                                        <td id="Year4tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                            <apex:inputField id="txtY4UnitCostNew" value="{!objNewAssumption.objAssumption.Y4_Unit_Cost_Payment_Currency__c}" onchange="CalculateTotalCostNew('4','{!$Component.txtY4UnitCostNew}','{!$Component.txtY4DurationDaysNew}','{!$Component.txtY4QuantityNew}','{!$Component.txtTotalCostY4New}','{!$Component.txtCurrencyUsedNew}','{!$Component.txtRateY4New}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'{!$Component.txtY4NumOfPersonsNew}');"/>
                                                        </td>                                                        
                                                        <td id="DurationTd4" class="dataCell TDstyle" style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)' && strSelectedYearAssumption == 'Year4','','none')};">
                                                            <apex:inputField id="txtY4DurationDaysNew" value="{!objNewAssumption.objAssumption.Y4_Duration_Days__c}" onchange="CalculateTotalCostNew('4','{!$Component.txtY4UnitCostNew}','{!$Component.txtY4DurationDaysNew}','{!$Component.txtY4QuantityNew}','{!$Component.txtTotalCostY4New}','{!$Component.txtCurrencyUsedNew}','{!$Component.txtRateY4New}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'{!$Component.txtY4NumOfPersonsNew}');"/>
                                                        </td>
                                                        <td id="Year4tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                            <apex:inputField id="txtY4QuantityNew" value="{!objNewAssumption.objAssumption.Y4_Quantity__c}" onchange="CalculateTotalCostNew('4','{!$Component.txtY4UnitCostNew}','{!$Component.txtY4DurationDaysNew}','{!$Component.txtY4QuantityNew}','{!$Component.txtTotalCostY4New}','{!$Component.txtCurrencyUsedNew}','{!$Component.txtRateY4New}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'{!$Component.txtY4NumOfPersonsNew}');"/>
                                                        </td>
                                                        <td id="DurationTd4" class="dataCell TDstyle" style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)' && strSelectedYearAssumption == 'Year4','','none')};">
                                                            <apex:inputField id="txtY4NumOfPersonsNew" value="{!objNewAssumption.objAssumption.Y4_Number_of_Persons__c}" onchange="CalculateTotalCostNew('4','{!$Component.txtY4UnitCostNew}','{!$Component.txtY4DurationDaysNew}','{!$Component.txtY4QuantityNew}','{!$Component.txtTotalCostY4New}','{!$Component.txtCurrencyUsedNew}','{!$Component.txtRateY4New}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'{!$Component.txtY4NumOfPersonsNew}');"/>
                                                        </td>
                                                        <td id="Year4tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                            <apex:outputText id="txtTotalCostY4New" value="{0,number,##,###,##0.00({!objNewAssumption.strAssumptionCurrency})}">
                                                                <apex:param value="{!objNewAssumption.TotalCostY4}" />
                                                            </apex:outputText>
                                                            <br/><apex:outputText id="txtRateY4New" value="{0,number,##,###,##0.00({!strGrantCurrency})}">
                                                                <apex:param value="{!objNewAssumption.CurrencyRateInUSDY4}"/>
                                                            </apex:outputText>
                                                        </td>    
                                                                                                               
                                                        <td class="dataCell TDstyle">
                                                            <apex:inputField id="idSupportNew" value="{!objNewAssumption.objAssumption.Assumptions_to_Support_Unit_Cost__c}" style="width:180px;"/>
                                                        </td>
                                                        <td class="dataCell TDstyle">
                                                            <apex:inputField id="idJustificationNew" value="{!objNewAssumption.objAssumption.Justifications_Comments__c}" style="height: 19px;resize:none;width:130px;"/>
                                                        </td>
                                                    </tr>
                                                    
                                                    <tr>
                                                        <td id="AddButtonTD{!Count}" colspan="2" style="text-align:center;">
                                                            <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-success" onclick="return AddNewAssumption('NewAssumptionTR{!Count}','AddButtonTD{!Count}','AddButtonTDHide{!Count}','{!Count-1}','{!objBL.strUnitCostMeasure}','{!$Component.idUnitMeasureNew}','{!$Component.txtCurrencyUsedNew}');" rendered="{!blnEdit}">
                                                                <i class="icon-plus-sign icon-white"></i>
                                                                <strong><apex:outputlabel value="{!$Label.Add}"/></strong>
                                                            </apex:commandLink>
                                                        </td>
                                                        <td colspan="2" id="AddButtonTDHide{!Count}" style="display:none;"></td>
                                                        <td class="dataCell TDstyle"></td>
                                                        <td style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)','','none')}"></td>
                                                        <td style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)','','none')}"></td>
                                                        <td class="dataCell TDstyle"></td>
                                                        <td class="dataCell TDstyle"></td>
                                                        <th colspan="2">
                                                            {!$Label.Total_Cost} ({!strGrantCurrency})<br/>
                                                            {!$Label.Average_Unit_Cost} ({!strGrantCurrency}) 
                                                        </th>
                                                        <td class="dataCell TDstyle">
                                                            <apex:outputText id="txtTotalUnitCostY1" value="{0,number,##,###,##0.00}" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                                <apex:param value="{!objBL.TotalOfAllY1Cost}" />
                                                            </apex:outputText>
                                                            <apex:outputText id="txtTotalUnitCostY2" value="{0,number,##,###,##0.00}"  style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                                <apex:param value="{!objBL.TotalOfAllY2Cost}" />
                                                            </apex:outputText>
                                                            <apex:outputText id="txtTotalUnitCostY3" value="{0,number,##,###,##0.00}"  style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                                <apex:param value="{!objBL.TotalOfAllY3Cost}" />
                                                            </apex:outputText>
                                                            <apex:outputText id="txtTotalUnitCostY4" value="{0,number,##,###,##0.00}"  style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                                <apex:param value="{!objBL.TotalOfAllY4Cost}" />
                                                            </apex:outputText>
                                                         <br/>
                                                            <apex:outputText id="txtUnitCostY1" value="{0,number,##,###,##0.00}"  style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                                <apex:param value="{!objBL.UnitCostY1}" />
                                                            </apex:outputText>
                                                            <apex:outputText id="txtUnitCostY2" value="{0,number,##,###,##0.00}"  style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                                <apex:param value="{!objBL.UnitCostY2}" />
                                                            </apex:outputText>
                                                            <apex:outputText id="txtUnitCostY3" value="{0,number,##,###,##0.00}"  style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                                <apex:param value="{!objBL.UnitCostY3}" />
                                                            </apex:outputText>
                                                            <apex:outputText id="txtUnitCostY4" value="{0,number,##,###,##0.00}"  style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                                <apex:param value="{!objBL.UnitCostY4}" />
                                                            </apex:outputText> 
                                                        </td>
                                                        <td class="dataCell TDstyle"></td>
                                                       
                                                    </tr>
                                                    <tr>
                                                       <td class="dataCell TDstyle" colspan="{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '2. Travel related costs (TRC)',10,9)}" style="text-align:center;">                                                        
                                                            <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-success" style="width:37px;align:right;" onclick="return SaveAssumptionRecords('NewAssumptionTR{!Count}','False');" rendered="{!blnEdit}">
 
                                                                <strong>{!$Label.Save}</strong>
                                                            </apex:commandLink>
                                                            <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-success" style="width:85px;align:right;" onclick="return SaveAssumptionRecords('NewAssumptionTR{!Count}','True');" status="Processing" rerender="frm" rendered="{!blnEdit}">
                                                                <!-- <apex:param value="{!Count-1}" name="CancelIndex" id="SaveCancelIndex"/>--> 
                                                                <strong>{!$Label.Save_and_Close}</strong>
                                                            </apex:commandLink>
                                                            <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-danger" style="align:left;" oncomplete="location.reload();" action="{!CancelAssumptionRecords}" status="Processing" rerender="frm" > 
                                                                <apex:param value="{!Count-1}" name="CancelIndex" id="CancelIndex"/>
                                                                <strong>{!$Label.Cancel}</strong>
                                                            </apex:commandLink>
                                                        </td>
                                                    </tr>
                                                </table>
                                                </apex:outputPanel>  
                                                <apex:outputPanel rendered="{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '1. Human Resources (HR)',true,false)}">
                                                <table width="90%" class="table table-striped" style="display:{!if(objBL.objAssumptionSet.Cost_Input__r.Cost_Grouping__c == '1. Human Resources (HR)','','none')};">
                                                    <thead>
                                                        <tr class="headerRow">
                                                            <th width="3%"></th>
                                                            <th class="headerRowLower" width="8%">
                                                                <apex:outputlabel value="{!$Label.Role_Description}"/>
                                                            </th> 
                                                            <th class="headerRowLower" width="6%">
                                                                <apex:outputlabel value="{!$Label.Unit_of_Measure}"/>
                                                            </th>           
                                                            <th class="headerRowLower" width="8%">
                                                                <apex:outputlabel value="{!$Label.Currency}"/>
                                                            </th>      
                                                                      
                                                            <th id="Year1thA" class="headerRowLower" width="8%" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                                <apex:outputlabel value="{!$Label.Y1_Net_Salary}"/>
                                                            </th>           
                                                            <th id="Year1thA" class="headerRowLower" width="8%" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                                <apex:outputlabel value="{!$Label.Y1_Social_Security_Other_Obligatory_Charges}"/>
                                                            </th>
                                                            <th id="Year1thA" class="headerRowLower" width="8%" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                                <apex:outputlabel value="{!$Label.Y1_Total_Salary}"/>
                                                            </th>                
                                                            <th id="Year1thA" class="headerRowLower" width="8%" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                                <apex:outputlabel value="{!$Label.Y1_Level_of_Effort}"/>
                                                            </th>  
                                                            <th id="Year1thA" class="headerRowLower" width="9%" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                                <apex:outputlabel value="{!$Label.Y1_Number_of_Persons}"/>
                                                            </th>                                                            
                                                            <th id="Year1thA" class="headerRowLower" width="9%" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                                <apex:outputlabel value="{!$Label.Y1_Total_Cost}"/>
                                                            </th>    
                                                            
                                                            <th id="Year2thA" class="headerRowLower" width="8%" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                                <apex:outputlabel value="{!$Label.Y2_Net_Salary}"/>
                                                            </th>           
                                                            <th id="Year2thA" class="headerRowLower" width="8%" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                                <apex:outputlabel value="{!$Label.Y2_Social_Security_Other_Obligatory_Charges}"/>
                                                            </th>
                                                            <th id="Year2thA" class="headerRowLower" width="8%" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                                <apex:outputlabel value="{!$Label.Y2_Total_Salary}"/>
                                                            </th>                
                                                            <th id="Year2thA" class="headerRowLower" width="8%" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                                <apex:outputlabel value="{!$Label.Y2_Level_of_Effort}"/>
                                                            </th>  
                                                            <th id="Year2thA" class="headerRowLower" width="9%" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                                <apex:outputlabel value="{!$Label.Y2_Number_of_persons}"/>
                                                            </th>                                                            
                                                            <th id="Year2thA" class="headerRowLower" width="9%" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                                <apex:outputlabel value="{!$Label.Y2_Total_Cost}"/>
                                                            </th> 
                                                            
                                                            <th id="Year3thA" class="headerRowLower" width="8%" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                                <apex:outputlabel value="{!$Label.Y3_Net_Salary}"/>
                                                            </th>           
                                                            <th id="Year3thA" class="headerRowLower" width="8%" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                                <apex:outputlabel value="{!$Label.Y3_Social_Security_Other_Obligatory_Charges}"/>
                                                            </th>
                                                            <th id="Year3thA" class="headerRowLower" width="8%" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                                <apex:outputlabel value="{!$Label.Y3_Total_Salary}"/>
                                                            </th>                
                                                            <th id="Year3thA" class="headerRowLower" width="8%" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                                <apex:outputlabel value="{!$Label.Y3_Level_of_Effort}"/>
                                                            </th>  
                                                            <th id="Year3thA" class="headerRowLower" width="9%" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                                <apex:outputlabel value="{!$Label.Y3_Number_of_persons}"/>
                                                            </th>                                                            
                                                            <th id="Year3thA" class="headerRowLower" width="9%" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                                <apex:outputlabel value="{!$Label.Y3_Total_Cost}"/>
                                                            </th> 
                                                            
                                                            <th id="Year4thA" class="headerRowLower" width="8%" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                                <apex:outputlabel value="{!$Label.Y4_Net_Salary}"/>
                                                            </th>           
                                                            <th id="Year4thA" class="headerRowLower" width="8%" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                                <apex:outputlabel value="{!$Label.Y4_Social_Security_Other_Obligatory_Charges}"/>
                                                            </th>
                                                            <th id="Year4thA" class="headerRowLower" width="8%" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                                <apex:outputlabel value="{!$Label.Y4_Total_Salary}"/>
                                                            </th>                
                                                            <th id="Year4thA" class="headerRowLower" width="8%" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                                <apex:outputlabel value="{!$Label.Y4_Level_of_Effort}"/>
                                                            </th>  
                                                            <th id="Year4thA" class="headerRowLower" width="9%" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                                <apex:outputlabel value="{!$Label.Y4_Number_of_persons}"/>
                                                            </th>                                                            
                                                            <th id="Year4thA" class="headerRowLower" width="9%" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                                <apex:outputlabel value="{!$Label.Y4_Total_Cost}"/>
                                                            </th> 
                                                                   
                                                            <th class="headerRowLower" width="9%">
                                                                <apex:outputlabel value="{!$Label.Assumptions_to_Support_Unit_Cost}"/>
                                                            </th>
                                                            <th class="headerRowLower" width="9%">
                                                                <apex:outputlabel value="{!$Label.Justification_Comments}"/>
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <apex:variable value="{!0}" var="CountAssumption"/>
                                                    <apex:repeat id="rptBudgetLineFirst" value="{!objBL.lstAssumptions}" var="objA">
                                                        <tr>
                                                            <td>
                                                                <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-danger" style="width:30px;height:25px;margin-top:6px;" onclick="return openAssumptionDeletePopup('{!$Component.tstpopupFirst}');" rendered="{!blnEdit}">
                                                                    <i class="icon-trash icon-white" style="margin-top:6px"></i> 
                                                                </apex:commandLink>
                                                                <apex:outputPanel id="tstpopupFirst" style="display:none;">
                                                                    <apex:outputPanel id="popupBackgroundFirst" styleClass="popupBackground"/>
                                                                    <apex:outputPanel id="custPopupFirst" styleClass="custPopup">
                                                                        <table width="100%" cellspacing="0" cellpadding="0" border="0">
                                                                            <tr>
                                                                                <td colspan="3" class="deletePopup">
                                                                                    <apex:outputtext style="color:#6590c4; font-size: 13.9pt;font-weight: bold;" value="Are you sure?"/>
                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td colspan="3" class="deletePopup">
                                                                                    <apex:outputtext style="color:#6590c4; font-size: 13.9pt;font-weight: bold;" value="{!$Label.This_Assumption_will_be_deleted}"/>
                                                                                </td>
                                                                            </tr>
                                                                            <tr>
                                                                                <td width="47%" class="deletePopup">
                                                                                    <apex:commandButton styleClass="popupButtonYes" value="Yes" action="{!DeleteAssumption}" reRender="frm" status="Processing">
                                                                                        <apex:param value="{!CountAssumption}" name="DeleteIndex" />
                                                                                        
                                                                                    </apex:commandButton>
                                                                                </td>
                                                                                <td width="6%" class="deletePopup"></td>
                                                                                <td width="47%" align="left" class="deletePopupCancel">
                                                                                    <apex:commandButton styleClass="popupButtonCancel" value="Cancel" onclick="return CloseAssumptionPopup('{!$Component.tstpopupFirst}');"/>
                                                                                </td>
                                                                            </tr>
                                                                        </table>
                                                                    </apex:outputPanel>
                                                                </apex:outputPanel>
                                                            </td>
                                                           
                                                             <!-- TCS 28/10/2014: Changes Ended-->
                                                            <td class="dataCell TDstyle">
                                                                <apex:inputField value="{!objA.objAssumption.Item_Description__c}" style="height: 19px;resize:none;width:150px;"/>
                                                            </td>
                                                            <td class="dataCell TDstyle">
                                                                 <apex:outputField id="AssUnitMeas" value="{!objA.objAssumption.Unit_of_Measure__c}" style="height: 19px;resize:none;width:100px;"/>
                                                               <!--  <apex:outputText id="txtUnitMeasureAss2" value="{!objBL.strUnitCostMeasure}"/> -->
                                                            </td>
                                                            <td class="dataCell TDstyle">
                                                                <apex:selectList id="txtCurrencyUsedFirst" value="{!objA.strCurrencyUsedAssumption}" size="1" style="width:101px" onchange="ChangeCurrencyRate(this.value,'{!CountAssumption}','false');">
                                                                    <apex:selectOptions value="{!AllIPCurrencyOptions}"></apex:selectOptions>
                                                                </apex:selectList>
                                                            </td>
                                                            
                                                            <td id="Year1tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                                <apex:inputField id="txtY1UnitCostFirst" value="{!objA.objAssumption.Y1_Net_Salary_Payment_Currency__c}" onchange="CalculateTotalCostFirst('{!$Component.txtY1UnitCostFirst}','{!$Component.txtY1ChargesFirst}','{!$Component.txtTotalSalaryY1First}','{!$Component.txtY1LevelFirst}','{!$Component.txtY1NumberFirst}','{!$Component.txtTotalCostY1First}','{!$Component.txtCurrencyUsedFirst}','{!$Component.txtRateY1First}','{!Count-1}',{!objBL.lstAssumptions.size},'Year1','{!$Component.txtTotalSalaryY1FirstGrntCurrency}');"/>
                                                            </td>
                                                            <td id="Year1tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                                <apex:inputField id="txtY1ChargesFirst" value="{!objA.objAssumption.Y1_Social_Security_Obligatory_Charges__c}" onchange="CalculateTotalCostFirst('{!$Component.txtY1UnitCostFirst}','{!$Component.txtY1ChargesFirst}','{!$Component.txtTotalSalaryY1First}','{!$Component.txtY1LevelFirst}','{!$Component.txtY1NumberFirst}','{!$Component.txtTotalCostY1First}','{!$Component.txtCurrencyUsedFirst}','{!$Component.txtRateY1First}','{!Count-1}',{!objBL.lstAssumptions.size},'Year1','{!$Component.txtTotalSalaryY1FirstGrntCurrency}');"/>
                                                            </td>
                                                            <td id="Year1tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                                
                                                                <apex:outputText id="txtTotalSalaryY1First" value="{0,number,##,###,##0.00({!objA.strAssumptionCurrency})}">
                                                                    <apex:param value="{!objA.TotalSalaryY1}"/>
                                                                </apex:outputText>
                                                                <br/>
                                                                <apex:outputText id="txtTotalSalaryY1FirstGrntCurrency" value="{0,number,##,###,##0.00({!strGrantCurrency})}">
                                                                    <apex:param value="{!objA.TotalSalaryY1GrntCurrency}"/>
                                                                </apex:outputText>
                                                            </td> 
                                                            <td id="Year1tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};"> 
                                                                <apex:inputField id="txtY1LevelFirst" value="{!objA.objAssumption.Y1_Level_of_Effort__c}" onchange="CalculateTotalCostFirst('{!$Component.txtY1UnitCostFirst}','{!$Component.txtY1ChargesFirst}','{!$Component.txtTotalSalaryY1First}','{!$Component.txtY1LevelFirst}','{!$Component.txtY1NumberFirst}','{!$Component.txtTotalCostY1First}','{!$Component.txtCurrencyUsedFirst}','{!$Component.txtRateY1First}','{!Count-1}',{!objBL.lstAssumptions.size},'Year1','{!$Component.txtTotalSalaryY1FirstGrntCurrency}');"/>
                                                            </td>
                                                            <td id="Year1tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                                <apex:inputField id="txtY1NumberFirst" value="{!objA.objAssumption.Y1_Number_of_Persons__c}" onchange="CalculateTotalCostFirst('{!$Component.txtY1UnitCostFirst}','{!$Component.txtY1ChargesFirst}','{!$Component.txtTotalSalaryY1First}','{!$Component.txtY1LevelFirst}','{!$Component.txtY1NumberFirst}','{!$Component.txtTotalCostY1First}','{!$Component.txtCurrencyUsedFirst}','{!$Component.txtRateY1First}','{!Count-1}',{!objBL.lstAssumptions.size},'Year1','{!$Component.txtTotalSalaryY1FirstGrntCurrency}');"/>
                                                            </td>               
                                                            <td id="Year1tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                                <apex:outputText id="txtTotalCostY1First" value="{0,number,##,###,##0.00({!objA.strAssumptionCurrency})}">
                                                                    <apex:param value="{!objA.TotalCostY1}"/>
                                                                </apex:outputText>
                                                                <br/>
                                                                <apex:outputText id="txtRateY1First" value="{0,number,##,###,##0.00({!strGrantCurrency})}">
                                                                    <apex:param value="{!objA.CurrencyRateInUSDY1}"/>
                                                                </apex:outputText>
                                                            </td>
                                                           
                                                            <td id="Year2tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                                <apex:inputField id="txtY2UnitCostFirst" value="{!objA.objAssumption.Y2_Net_Salary_Payment_Currency__c}" onchange="CalculateTotalCostFirst('{!$Component.txtY2UnitCostFirst}','{!$Component.txtY2ChargesFirst}','{!$Component.txtTotalSalaryY2First}','{!$Component.txtY2LevelFirst}','{!$Component.txtY2NumberFirst}','{!$Component.txtTotalCostY2First}','{!$Component.txtCurrencyUsedFirst}','{!$Component.txtRateY2First}','{!Count-1}',{!objBL.lstAssumptions.size},'Year2','{!$Component.txtTotalSalaryY2FirstGrntCurrency}');"/>
                                                            </td>
                                                            <td id="Year2tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                                <apex:inputField id="txtY2ChargesFirst" value="{!objA.objAssumption.Y2_Social_Security_Obligatory_Charges__c}" onchange="CalculateTotalCostFirst('{!$Component.txtY2UnitCostFirst}','{!$Component.txtY2ChargesFirst}','{!$Component.txtTotalSalaryY2First}','{!$Component.txtY2LevelFirst}','{!$Component.txtY2NumberFirst}','{!$Component.txtTotalCostY2First}','{!$Component.txtCurrencyUsedFirst}','{!$Component.txtRateY2First}','{!Count-1}',{!objBL.lstAssumptions.size},'Year2','{!$Component.txtTotalSalaryY2FirstGrntCurrency}');"/>
                                                            </td>
                                                            <td id="Year2tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                                <apex:outputText id="txtTotalSalaryY2First" value="{0,number,##,###,##0.00({!objA.strAssumptionCurrency})}">
                                                                    <apex:param value="{!objA.TotalSalaryY2}"/>
                                                                </apex:outputText>
                                                                <br/>
                                                                <apex:outputText id="txtTotalSalaryY2FirstGrntCurrency" value="{0,number,##,###,##0.00({!strGrantCurrency})}">
                                                                    <apex:param value="{!objA.TotalSalaryY2GrntCurrency}"/>
                                                                </apex:outputText>
                                                            </td>
                                                            <td id="Year2tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                                <apex:inputField id="txtY2LevelFirst" value="{!objA.objAssumption.Y2_Level_of_Effort__c}" onchange="CalculateTotalCostFirst('{!$Component.txtY2UnitCostFirst}','{!$Component.txtY2ChargesFirst}','{!$Component.txtTotalSalaryY2First}','{!$Component.txtY2LevelFirst}','{!$Component.txtY2NumberFirst}','{!$Component.txtTotalCostY2First}','{!$Component.txtCurrencyUsedFirst}','{!$Component.txtRateY2First}','{!Count-1}',{!objBL.lstAssumptions.size},'Year2','{!$Component.txtTotalSalaryY2FirstGrntCurrency}');"/>
                                                            </td>
                                                            <td id="Year2tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                                <apex:inputField id="txtY2NumberFirst" value="{!objA.objAssumption.Y2_Number_of_Persons__c}" onchange="CalculateTotalCostFirst('{!$Component.txtY2UnitCostFirst}','{!$Component.txtY2ChargesFirst}','{!$Component.txtTotalSalaryY2First}','{!$Component.txtY2LevelFirst}','{!$Component.txtY2NumberFirst}','{!$Component.txtTotalCostY2First}','{!$Component.txtCurrencyUsedFirst}','{!$Component.txtRateY2First}','{!Count-1}',{!objBL.lstAssumptions.size},'Year2','{!$Component.txtTotalSalaryY2FirstGrntCurrency}');"/>
                                                            </td>               
                                                            <td id="Year2tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                                <apex:outputText id="txtTotalCostY2First" value="{0,number,##,###,##0.00({!objA.strAssumptionCurrency})}">
                                                                    <apex:param value="{!objA.TotalCostY2}"/>
                                                                </apex:outputText>
                                                                <br/><apex:outputText id="txtRateY2First"  value="{0,number,##,###,##0.00({!strGrantCurrency})}">
                                                                    <apex:param value="{!objA.CurrencyRateInUSDY2}"/>
                                                                </apex:outputText>
                                                            </td>
                                                            
                                                            <td id="Year3tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                                <apex:inputField id="txtY3UnitCostFirst" value="{!objA.objAssumption.Y3_Net_Salary_Payment_Currency__c}" onchange="CalculateTotalCostFirst('{!$Component.txtY3UnitCostFirst}','{!$Component.txtY3ChargesFirst}','{!$Component.txtTotalSalaryY3First}','{!$Component.txtY3LevelFirst}','{!$Component.txtY3NumberFirst}','{!$Component.txtTotalCostY3First}','{!$Component.txtCurrencyUsedFirst}','{!$Component.txtRateY3First}','{!Count-1}',{!objBL.lstAssumptions.size},'Year3','{!$Component.txtTotalSalaryY3FirstGrntCurrency}');"/>
                                                            </td>
                                                            <td id="Year3tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                                <apex:inputField id="txtY3ChargesFirst" value="{!objA.objAssumption.Y3_Social_Security_Obligatory_Charges__c}" onchange="CalculateTotalCostFirst('{!$Component.txtY3UnitCostFirst}','{!$Component.txtY3ChargesFirst}','{!$Component.txtTotalSalaryY3First}','{!$Component.txtY3LevelFirst}','{!$Component.txtY3NumberFirst}','{!$Component.txtTotalCostY3First}','{!$Component.txtCurrencyUsedFirst}','{!$Component.txtRateY3First}','{!Count-1}',{!objBL.lstAssumptions.size},'Year3','{!$Component.txtTotalSalaryY3FirstGrntCurrency}');"/>
                                                            </td> 
                                                            <td id="Year3tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                                <apex:outputText id="txtTotalSalaryY3First" value="{0,number,##,###,##0.00({!objA.strAssumptionCurrency})}">
                                                                    <apex:param value="{!objA.TotalSalaryY3}"/>
                                                                </apex:outputText>
                                                                <br/>
                                                                <apex:outputText id="txtTotalSalaryY3FirstGrntCurrency" value="{0,number,##,###,##0.00({!strGrantCurrency})}">
                                                                    <apex:param value="{!objA.TotalSalaryY3GrntCurrency}"/>
                                                                </apex:outputText>
                                                            </td>
                                                            <td id="Year3tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                                <apex:inputField id="txtY3LevelFirst" value="{!objA.objAssumption.Y3_Level_of_Effort__c}" onchange="CalculateTotalCostFirst('{!$Component.txtY3UnitCostFirst}','{!$Component.txtY3ChargesFirst}','{!$Component.txtTotalSalaryY3First}','{!$Component.txtY3LevelFirst}','{!$Component.txtY3NumberFirst}','{!$Component.txtTotalCostY3First}','{!$Component.txtCurrencyUsedFirst}','{!$Component.txtRateY3First}','{!Count-1}',{!objBL.lstAssumptions.size},'Year3','{!$Component.txtTotalSalaryY3FirstGrntCurrency}');"/>
                                                            </td>
                                                            <td id="Year3tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                                <apex:inputField id="txtY3NumberFirst" value="{!objA.objAssumption.Y3_Number_of_Persons__c}" onchange="CalculateTotalCostFirst('{!$Component.txtY3UnitCostFirst}','{!$Component.txtY3ChargesFirst}','{!$Component.txtTotalSalaryY3First}','{!$Component.txtY3LevelFirst}','{!$Component.txtY3NumberFirst}','{!$Component.txtTotalCostY3First}','{!$Component.txtCurrencyUsedFirst}','{!$Component.txtRateY3First}','{!Count-1}',{!objBL.lstAssumptions.size},'Year3','{!$Component.txtTotalSalaryY3FirstGrntCurrency}');"/>
                                                            </td>               
                                                            <td id="Year3tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                                <apex:outputText id="txtTotalCostY3First" value="{0,number,##,###,##0.00({!objA.strAssumptionCurrency})}">
                                                                    <apex:param value="{!objA.TotalCostY3}"/>
                                                                </apex:outputText>
                                                                <br/><apex:outputText id="txtRateY3First" value="{0,number,##,###,##0.00({!strGrantCurrency})}">
                                                                    <apex:param value="{!objA.CurrencyRateInUSDY3}"/>
                                                                </apex:outputText>
                                                            </td>
                                                            
                                                            <td id="Year4tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                                <apex:inputField id="txtY4UnitCostFirst" value="{!objA.objAssumption.Y4_Net_Salary_Payment_Currency__c}" onchange="CalculateTotalCostFirst('{!$Component.txtY4UnitCostFirst}','{!$Component.txtY4ChargesFirst}','{!$Component.txtTotalSalaryY4First}','{!$Component.txtY4LevelFirst}','{!$Component.txtY4NumberFirst}','{!$Component.txtTotalCostY4First}','{!$Component.txtCurrencyUsedFirst}','{!$Component.txtRateY4First}','{!Count-1}',{!objBL.lstAssumptions.size},'Year4','{!$Component.txtTotalSalaryY4FirstGrntCurrency}');"/>
                                                            </td>
                                                            <td id="Year4tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                                <apex:inputField id="txtY4ChargesFirst" value="{!objA.objAssumption.Y4_Social_Security_Obligatory_Charges__c}" onchange="CalculateTotalCostFirst('{!$Component.txtY4UnitCostFirst}','{!$Component.txtY4ChargesFirst}','{!$Component.txtTotalSalaryY4First}','{!$Component.txtY4LevelFirst}','{!$Component.txtY4NumberFirst}','{!$Component.txtTotalCostY4First}','{!$Component.txtCurrencyUsedFirst}','{!$Component.txtRateY4First}','{!Count-1}',{!objBL.lstAssumptions.size},'Year4','{!$Component.txtTotalSalaryY4FirstGrntCurrency}');"/>
                                                            </td>
                                                            <td id="Year4tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                                <apex:outputText id="txtTotalSalaryY4First"  value="{0,number,##,###,##0.00({!objA.strAssumptionCurrency})}">
                                                                    <apex:param value="{!objA.TotalSalaryY4}"/>
                                                                </apex:outputText>
                                                                <br/>
                                                                <apex:outputText id="txtTotalSalaryY4FirstGrntCurrency" value="{0,number,##,###,##0.00({!strGrantCurrency})}">
                                                                    <apex:param value="{!objA.TotalSalaryY4GrntCurrency}"/>
                                                                </apex:outputText>
                                                            </td>
                                                            <td id="Year4tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                                <apex:inputField id="txtY4LevelFirst" value="{!objA.objAssumption.Y4_Level_of_Effort__c}" onchange="CalculateTotalCostFirst('{!$Component.txtY4UnitCostFirst}','{!$Component.txtY4ChargesFirst}','{!$Component.txtTotalSalaryY4First}','{!$Component.txtY4LevelFirst}','{!$Component.txtY4NumberFirst}','{!$Component.txtTotalCostY4First}','{!$Component.txtCurrencyUsedFirst}','{!$Component.txtRateY4First}','{!Count-1}',{!objBL.lstAssumptions.size},'Year4','{!$Component.txtTotalSalaryY4FirstGrntCurrency}');"/>
                                                            </td>
                                                            <td id="Year4tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                                <apex:inputField id="txtY4NumberFirst" value="{!objA.objAssumption.Y4_Number_of_Persons__c}" onchange="CalculateTotalCostFirst('{!$Component.txtY4UnitCostFirst}','{!$Component.txtY4ChargesFirst}','{!$Component.txtTotalSalaryY4First}','{!$Component.txtY4LevelFirst}','{!$Component.txtY4NumberFirst}','{!$Component.txtTotalCostY4First}','{!$Component.txtCurrencyUsedFirst}','{!$Component.txtRateY4First}','{!Count-1}',{!objBL.lstAssumptions.size},'Year4','{!$Component.txtTotalSalaryY4FirstGrntCurrency}');"/>
                                                            </td>               
                                                            <td id="Year4tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                                <apex:outputText id="txtTotalCostY4First" value="{0,number,##,###,##0.00({!objA.strAssumptionCurrency})}">
                                                                    <apex:param value="{!objA.TotalCostY4}"/>
                                                                </apex:outputText>
                                                                <br/>
                                                                <apex:outputText id="txtRateY4First" value="{0,number,##,###,##0.00({!strGrantCurrency})}">
                                                                    <apex:param value="{!objA.CurrencyRateInUSDY4}"/>
                                                                </apex:outputText>
                                                            </td>
                                                            
                                                            <td class="dataCell TDstyle">
                                                                <apex:inputField value="{!objA.objAssumption.Assumptions_to_Support_Unit_Cost__c}" style="width:160px;"/>
                                                            </td>
                                                            <td class="dataCell TDstyle">
                                                                <apex:inputField value="{!objA.objAssumption.Justifications_Comments__c}" style="height: 19px;resize:none;width:130px;"/>
                                                            </td>
                                                        </tr>
                                                        <apex:variable value="{!CountAssumption+1}" var="CountAssumption"/>
                                                    </apex:repeat>
                                                    
                                                    <tr id="NewAssumptionTRFirst{!Count}" style="display:none;">
                                                        <td>
                                                            <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-danger" style="width:30px;height:25px;margin-top:6px;" onclick="return CancelAssumption1('NewAssumptionTRFirst{!Count}','AddButtonTDFirst{!Count}','AddButtonTDHideFirst{!Count}','{!Count-1}','{!objBL.lstAssumptions.size}');" >
                                                                <i class="icon-trash icon-white" style="margin-top:6px"></i> 
                                                            </apex:commandLink>
                                                        </td>
                                                        <td class="dataCell TDstyle">
                                                            <apex:inputField id="idItDecNewFirst" value="{!objNewAssumption.objAssumption.Item_Description__c}" style="height: 19px;resize:none;width:150px;"/>
                                                        </td>
                                                        <td class="dataCell TDstyle">
                                                             <apex:outputField id="idUMNewFirst" value="{!objNewAssumption.objAssumption.Unit_of_Measure__c}" style="height: 19px;resize:none;width:100px;"/> 
                                                            <!-- <apex:outputText id="txtUnitMeasureAss3" value="{!objBL.strUnitCostMeasure}"/> -->
                                                        </td>
                                                        <td class="dataCell TDstyle">
                                                            <apex:selectList id="txtCurrencyUsedFirstNew" value="{!objNewAssumption.strCurrencyUsedAssumption}" size="1" style="width:101px" onchange="ChangeCurrencyRate(this.value,'{!CountAssumption}','true');">
                                                                <apex:selectOptions value="{!AllIPCurrencyOptions}"></apex:selectOptions>
                                                            </apex:selectList>
                                                        </td>
                                                        
                                                        <td id="Year1tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                            <apex:inputField id="txtY1UnitCostNewFirst" value="{!objNewAssumption.objAssumption.Y1_Net_Salary_Payment_Currency__c}" onchange="CalculateTotalCostFirstNew('{!$Component.txtY1UnitCostNewFirst}','{!$Component.txtY1ChargesNewFirst}','{!$Component.txtTotalSalaryY1NewFirst}','{!$Component.txtY1LevelNewFirst}','{!$Component.txtY1NumberNewFirst}','{!$Component.txtTotalCostY1NewFirst}','{!$Component.txtCurrencyUsedFirstNew}','{!$Component.txtRateY1NewFirst}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'Year1','{!$Component.txtTotalSalaryY1NewFirstRate}');"/>
                                                        </td>
                                                        <td id="Year1tdA" class="dataCell TDstyle"  style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                            <apex:inputField id="txtY1ChargesNewFirst" value="{!objNewAssumption.objAssumption.Y1_Social_Security_Obligatory_Charges__c}" onchange="CalculateTotalCostFirstNew('{!$Component.txtY1UnitCostNewFirst}','{!$Component.txtY1ChargesNewFirst}','{!$Component.txtTotalSalaryY1NewFirst}','{!$Component.txtY1LevelNewFirst}','{!$Component.txtY1NumberNewFirst}','{!$Component.txtTotalCostY1NewFirst}','{!$Component.txtCurrencyUsedFirstNew}','{!$Component.txtRateY1NewFirst}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'Year1','{!$Component.txtTotalSalaryY1NewFirstRate}');"/>
                                                        </td>
                                                        <td id="Year1tdA" class="dataCell TDstyle " style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                            <apex:outputText id="txtTotalSalaryY1NewFirst" value="{0,number,##,###,##0.00({!objNewAssumption.strAssumptionCurrency})}">
                                                                <apex:param value="{!objNewAssumption.TotalSalaryY1}"/>
                                                            </apex:outputText>
                                                            <br/>
                                                            <apex:outputText id="txtTotalSalaryY1NewFirstRate" value="{0,number,##,###,##0.00({!strGrantCurrency})}">
                                                                <apex:param value="{!objNewAssumption.TotalSalaryY1GrntCurrency}"/>
                                                            </apex:outputText>
                                                        </td>
                                                        <td id="Year1tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                            <apex:inputField id="txtY1LevelNewFirst" value="{!objNewAssumption.objAssumption.Y1_Level_of_Effort__c}" onchange="CalculateTotalCostFirstNew('{!$Component.txtY1UnitCostNewFirst}','{!$Component.txtY1ChargesNewFirst}','{!$Component.txtTotalSalaryY1NewFirst}','{!$Component.txtY1LevelNewFirst}','{!$Component.txtY1NumberNewFirst}','{!$Component.txtTotalCostY1NewFirst}','{!$Component.txtCurrencyUsedFirstNew}','{!$Component.txtRateY1NewFirst}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'Year1','{!$Component.txtTotalSalaryY1NewFirstRate}');"/>
                                                        </td>
                                                        <td id="Year1tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                            <apex:inputField id="txtY1NumberNewFirst" value="{!objNewAssumption.objAssumption.Y1_Number_of_Persons__c}" onchange="CalculateTotalCostFirstNew('{!$Component.txtY1UnitCostNewFirst}','{!$Component.txtY1ChargesNewFirst}','{!$Component.txtTotalSalaryY1NewFirst}','{!$Component.txtY1LevelNewFirst}','{!$Component.txtY1NumberNewFirst}','{!$Component.txtTotalCostY1NewFirst}','{!$Component.txtCurrencyUsedFirstNew}','{!$Component.txtRateY1NewFirst}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'Year1','{!$Component.txtTotalSalaryY1NewFirstRate}');"/>
                                                        </td>               
                                                        <td id="Year1tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                            <apex:outputText id="txtTotalCostY1NewFirst" value="{0,number,##,###,##0.00({!objNewAssumption.strAssumptionCurrency})}">
                                                                <apex:param value="{!objNewAssumption.TotalCostY1}"/>
                                                            </apex:outputText>
                                                            <br/>
                                                            <apex:outputText id="txtRateY1NewFirst" value="{0,number,##,###,##0.00({!strGrantCurrency})}">
                                                                <apex:param value="{!objNewAssumption.CurrencyRateInUSDY1}"/>
                                                            </apex:outputText>
                                                        </td>
                                                           
                                                        <td id="Year2tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                            <apex:inputField id="txtY2UnitCostNewFirst" value="{!objNewAssumption.objAssumption.Y2_Net_Salary_Payment_Currency__c}" onchange="CalculateTotalCostFirstNew('{!$Component.txtY2UnitCostNewFirst}','{!$Component.txtY2ChargesNewFirst}','{!$Component.txtTotalSalaryY2NewFirst}','{!$Component.txtY2LevelNewFirst}','{!$Component.txtY2NumberNewFirst}','{!$Component.txtTotalCostY2NewFirst}','{!$Component.txtCurrencyUsedFirstNew}','{!$Component.txtRateY2NewFirst}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'Year2','{!$Component.txtTotalSalaryY2NewFirstRate}');"/>
                                                        </td>
                                                        <td  id="Year2tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                            <apex:inputField id="txtY2ChargesNewFirst" value="{!objNewAssumption.objAssumption.Y2_Social_Security_Obligatory_Charges__c}" onchange="CalculateTotalCostFirstNew('{!$Component.txtY2UnitCostNewFirst}','{!$Component.txtY2ChargesNewFirst}','{!$Component.txtTotalSalaryY2NewFirst}','{!$Component.txtY2LevelNewFirst}','{!$Component.txtY2NumberNewFirst}','{!$Component.txtTotalCostY2NewFirst}','{!$Component.txtCurrencyUsedFirstNew}','{!$Component.txtRateY2NewFirst}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'Year2','{!$Component.txtTotalSalaryY2NewFirstRate}');"/>
                                                        </td>
                                                        <td id="Year2tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                            <apex:outputText id="txtTotalSalaryY2NewFirst" value="{0,number,##,###,##0.00({!objNewAssumption.strAssumptionCurrency})}">
                                                                <apex:param value="{!objNewAssumption.TotalSalaryY2}"/>                                                             
                                                            </apex:outputText>
                                                            <br/>
                                                            <apex:outputText id="txtTotalSalaryY2NewFirstRate" value="{0,number,##,###,##0.00({!strGrantCurrency})}">
                                                                <apex:param value="{!objNewAssumption.TotalSalaryY2GrntCurrency}"/>
                                                            </apex:outputText>
                                                        </td>
                                                        <td id="Year2tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                            <apex:inputField id="txtY2LevelNewFirst" value="{!objNewAssumption.objAssumption.Y2_Level_of_Effort__c}" onchange="CalculateTotalCostFirstNew('{!$Component.txtY2UnitCostNewFirst}','{!$Component.txtY2ChargesNewFirst}','{!$Component.txtTotalSalaryY2NewFirst}','{!$Component.txtY2LevelNewFirst}','{!$Component.txtY2NumberNewFirst}','{!$Component.txtTotalCostY2NewFirst}','{!$Component.txtCurrencyUsedFirstNew}','{!$Component.txtRateY2NewFirst}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'Year2','{!$Component.txtTotalSalaryY2NewFirstRate}');"/>
                                                        </td>
                                                        <td id="Year2tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                            <apex:inputField id="txtY2NumberNewFirst" value="{!objNewAssumption.objAssumption.Y2_Number_of_Persons__c}" onchange="CalculateTotalCostFirstNew('{!$Component.txtY2UnitCostNewFirst}','{!$Component.txtY2ChargesNewFirst}','{!$Component.txtTotalSalaryY2NewFirst}','{!$Component.txtY2LevelNewFirst}','{!$Component.txtY2NumberNewFirst}','{!$Component.txtTotalCostY2NewFirst}','{!$Component.txtCurrencyUsedFirstNew}','{!$Component.txtRateY2NewFirst}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'Year2','{!$Component.txtTotalSalaryY2NewFirstRate}');"/>
                                                        </td>               
                                                        <td id="Year2tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                            <apex:outputText id="txtTotalCostY2NewFirst" value="{0,number,##,###,##0.00({!objNewAssumption.strAssumptionCurrency})}">
                                                                <apex:param value="{!objNewAssumption.TotalCostY2}"/>
                                                            </apex:outputText>
                                                            <br/>
                                                            <apex:outputText id="txtRateY2NewFirst" value="{0,number,##,###,##0.00({!strGrantCurrency})}">
                                                                <apex:param value="{!objNewAssumption.CurrencyRateInUSDY2}"/>
                                                            </apex:outputText>
                                                        </td>
                                                        
                                                        <td id="Year3tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                            <apex:inputField id="txtY3UnitCostNewFirst" value="{!objNewAssumption.objAssumption.Y3_Net_Salary_Payment_Currency__c}" onchange="CalculateTotalCostFirstNew('{!$Component.txtY3UnitCostNewFirst}','{!$Component.txtY3ChargesNewFirst}','{!$Component.txtTotalSalaryY3NewFirst}','{!$Component.txtY3LevelNewFirst}','{!$Component.txtY3NumberNewFirst}','{!$Component.txtTotalCostY3NewFirst}','{!$Component.txtCurrencyUsedFirstNew}','{!$Component.txtRateY3NewFirst}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'Year3','{!$Component.txtTotalSalaryY3NewFirstRate}');"/>
                                                        </td>
                                                        <td id="Year3tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};" >
                                                            <apex:inputField id="txtY3ChargesNewFirst" value="{!objNewAssumption.objAssumption.Y3_Social_Security_Obligatory_Charges__c}" onchange="CalculateTotalCostFirstNew('{!$Component.txtY3UnitCostNewFirst}','{!$Component.txtY3ChargesNewFirst}','{!$Component.txtTotalSalaryY3NewFirst}','{!$Component.txtY3LevelNewFirst}','{!$Component.txtY3NumberNewFirst}','{!$Component.txtTotalCostY3NewFirst}','{!$Component.txtCurrencyUsedFirstNew}','{!$Component.txtRateY3NewFirst}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'Year3','{!$Component.txtTotalSalaryY3NewFirstRate}');"/>
                                                        </td>
                                                        <td id="Year3tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                            <apex:outputText id="txtTotalSalaryY3NewFirst" value="{0,number,##,###,##0.00({!objNewAssumption.strAssumptionCurrency})}">
                                                                <apex:param value="{!objNewAssumption.TotalSalaryY3}"/>
                                                            </apex:outputText>
                                                            <br/>
                                                            <apex:outputText id="txtTotalSalaryY3NewFirstRate" value="{0,number,##,###,##0.00({!strGrantCurrency})}">
                                                                <apex:param value="{!objNewAssumption.TotalSalaryY3GrntCurrency}"/>
                                                            </apex:outputText>
                                                        </td>
                                                        <td id="Year3tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                            <apex:inputField id="txtY3LevelNewFirst" value="{!objNewAssumption.objAssumption.Y3_Level_of_Effort__c}" onchange="CalculateTotalCostFirstNew('{!$Component.txtY3UnitCostNewFirst}','{!$Component.txtY3ChargesNewFirst}','{!$Component.txtTotalSalaryY3NewFirst}','{!$Component.txtY3LevelNewFirst}','{!$Component.txtY3NumberNewFirst}','{!$Component.txtTotalCostY3NewFirst}','{!$Component.txtCurrencyUsedFirstNew}','{!$Component.txtRateY3NewFirst}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'Year3','{!$Component.txtTotalSalaryY3NewFirstRate}');"/>
                                                        </td>
                                                        <td id="Year3tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                            <apex:inputField id="txtY3NumberNewFirst" value="{!objNewAssumption.objAssumption.Y3_Number_of_Persons__c}" onchange="CalculateTotalCostFirstNew('{!$Component.txtY3UnitCostNewFirst}','{!$Component.txtY3ChargesNewFirst}','{!$Component.txtTotalSalaryY3NewFirst}','{!$Component.txtY3LevelNewFirst}','{!$Component.txtY3NumberNewFirst}','{!$Component.txtTotalCostY3NewFirst}','{!$Component.txtCurrencyUsedFirstNew}','{!$Component.txtRateY3NewFirst}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'Year3','{!$Component.txtTotalSalaryY3NewFirstRate}');"/>
                                                        </td>               
                                                        <td id="Year3tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                            <apex:outputText id="txtTotalCostY3NewFirst" value="{0,number,##,###,##0.00({!objNewAssumption.strAssumptionCurrency})}">
                                                                <apex:param value="{!objNewAssumption.TotalCostY3}"/>
                                                            </apex:outputText>
                                                            <br/>
                                                            <apex:outputText id="txtRateY3NewFirst" value="{0,number,##,###,##0.00({!strGrantCurrency})}">
                                                                <apex:param value="{!objNewAssumption.CurrencyRateInUSDY3}"/>
                                                            </apex:outputText>
                                                        </td>
                                                        
                                                        <td id="Year4tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                            <apex:inputField id="txtY4UnitCostNewFirst" value="{!objNewAssumption.objAssumption.Y4_Net_Salary_Payment_Currency__c}" onchange="CalculateTotalCostFirstNew('{!$Component.txtY4UnitCostNewFirst}','{!$Component.txtY4ChargesNewFirst}','{!$Component.txtTotalSalaryY4NewFirst}','{!$Component.txtY4LevelNewFirst}','{!$Component.txtY4NumberNewFirst}','{!$Component.txtTotalCostY4NewFirst}','{!$Component.txtCurrencyUsedFirstNew}','{!$Component.txtRateY4NewFirst}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'Year4','{!$Component.txtTotalSalaryY4NewFirstRate}');"/>
                                                        </td>
                                                        <td id="Year4tdA" class="dataCell TDstyle"  style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                            <apex:inputField id="txtY4ChargesNewFirst" value="{!objNewAssumption.objAssumption.Y4_Social_Security_Obligatory_Charges__c}" onchange="CalculateTotalCostFirstNew('{!$Component.txtY4UnitCostNewFirst}','{!$Component.txtY4ChargesNewFirst}','{!$Component.txtTotalSalaryY4NewFirst}','{!$Component.txtY4LevelNewFirst}','{!$Component.txtY4NumberNewFirst}','{!$Component.txtTotalCostY4NewFirst}','{!$Component.txtCurrencyUsedFirstNew}','{!$Component.txtRateY4NewFirst}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'Year4','{!$Component.txtTotalSalaryY4NewFirstRate}');"/>
                                                        </td>
                                                        <td id="Year4tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                            <apex:outputText id="txtTotalSalaryY4NewFirst" value="{0,number,##,###,##0.00({!objNewAssumption.strAssumptionCurrency})}">
                                                                <apex:param value="{!objNewAssumption.TotalSalaryY4}"/>
                                                            </apex:outputText>
                                                            <br/>
                                                            <apex:outputText id="txtTotalSalaryY4NewFirstRate" value="{0,number,##,###,##0.00({!strGrantCurrency})}">
                                                                <apex:param value="{!objNewAssumption.TotalSalaryY4GrntCurrency}"/>
                                                            </apex:outputText>
                                                        </td>
                                                        <td id="Year4tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                            <apex:inputField id="txtY4LevelNewFirst" value="{!objNewAssumption.objAssumption.Y4_Level_of_Effort__c}" onchange="CalculateTotalCostFirstNew('{!$Component.txtY4UnitCostNewFirst}','{!$Component.txtY4ChargesNewFirst}','{!$Component.txtTotalSalaryY4NewFirst}','{!$Component.txtY4LevelNewFirst}','{!$Component.txtY4NumberNewFirst}','{!$Component.txtTotalCostY4NewFirst}','{!$Component.txtCurrencyUsedFirstNew}','{!$Component.txtRateY4NewFirst}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'Year4','{!$Component.txtTotalSalaryY4NewFirstRate}');"/>
                                                        </td>
                                                        <td id="Year4tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                            <apex:inputField id="txtY4NumberNewFirst" value="{!objNewAssumption.objAssumption.Y4_Number_of_Persons__c}" onchange="CalculateTotalCostFirstNew('{!$Component.txtY4UnitCostNewFirst}','{!$Component.txtY4ChargesNewFirst}','{!$Component.txtTotalSalaryY4NewFirst}','{!$Component.txtY4LevelNewFirst}','{!$Component.txtY4NumberNewFirst}','{!$Component.txtTotalCostY4NewFirst}','{!$Component.txtCurrencyUsedFirstNew}','{!$Component.txtRateY4NewFirst}','{!Count-1}',{!if(objBL.lstAssumptions != null && objBL.lstAssumptions.size > 0,objBL.lstAssumptions.size,0)},'Year4','{!$Component.txtTotalSalaryY4NewFirstRate}');"/>
                                                        </td>               
                                                        <td id="Year4tdA" class="dataCell TDstyle" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                            <apex:outputText id="txtTotalCostY4NewFirst" value="{0,number,##,###,##0.00({!objNewAssumption.strAssumptionCurrency})}">
                                                                <apex:param value="{!objNewAssumption.TotalCostY4}"/>
                                                            </apex:outputText>
                                                            <br/>
                                                            <apex:outputText id="txtRateY4NewFirst" value="{0,number,##,###,##0.00({!strGrantCurrency})}">
                                                                <apex:param value="{!objNewAssumption.CurrencyRateInUSDY4}"/>
                                                            </apex:outputText>
                                                                
                                                        </td>
                                                           
                                                        <td class="dataCell TDstyle">
                                                            <apex:inputField id="idSuppoetFirstNew" value="{!objNewAssumption.objAssumption.Assumptions_to_Support_Unit_Cost__c}" style="width:160px;"/>
                                                        </td>
                                                        <td class="dataCell TDstyle">
                                                            <apex:inputField id="idJCFirstNew" value="{!objNewAssumption.objAssumption.Justifications_Comments__c}" style="height: 19px;resize:none;width:130px;"/>
                                                        </td>
                                                    </tr>
                                                    
                                                    <tr>
                                                        <td class="dataCell TDstyle" id="AddButtonTDFirst{!Count}" colspan="2" style="text-align:center;">
                                                            <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-success" onclick="return AddNewAssumption('NewAssumptionTRFirst{!Count}','AddButtonTDFirst{!Count}','AddButtonTDHideFirst{!Count}','{!Count-1}','{!objBL.strUnitCostMeasure}','{!$Component.idUMNewFirst}','{!$Component.txtCurrencyUsedFirstNew}');" rendered="{!blnEdit}">
                                                                <i class="icon-plus-sign icon-white"></i>
                                                                <strong>{!$Label.Add}</strong>
                                                            </apex:commandLink>
                                                        </td>
                                                        <td class="dataCell TDstyle" colspan="2" id="AddButtonTDHideFirst{!Count}" style="display:none;"></td>
                                                        <td class="dataCell TDstyle" colspan="5"></td>       
                                                        <th class="dataCell TDstyle" colspan="2">
                                                            {!$Label.Total_Cost} ({!strGrantCurrency})<br/>
                                                            {!$Label.Average_Unit_Cost} ({!strGrantCurrency})
                                                        </th>
                                                        <td class="dataCell TDstyle">
                                                            <apex:outputText id="txtTotalUnitCostY1First" value="{0,number,##,###,##0.00}" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                                <apex:param value="{!objBL.TotalOfAllY1Cost}"/>
                                                            </apex:outputText>
                                                            <apex:outputText id="txtTotalUnitCostY2First" value="{0,number,##,###,##0.00}" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                                <apex:param value="{!objBL.TotalOfAllY2Cost}"/>
                                                            </apex:outputText>
                                                            <apex:outputText id="txtTotalUnitCostY3First" value="{0,number,##,###,##0.00}" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                                <apex:param value="{!objBL.TotalOfAllY3Cost}"/>
                                                            </apex:outputText>
                                                            <apex:outputText id="txtTotalUnitCostY4First" value="{0,number,##,###,##0.00}" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                                <apex:param value="{!objBL.TotalOfAllY4Cost}"/>
                                                            </apex:outputText>
                                                            <br/>
                                                            <apex:outputText id="txtUnitCostY1First" value="{0,number,##,###,##0.00}" style="display:{!if(strSelectedYearAssumption == 'Year1','','none')};">
                                                                <apex:param value="{!objBL.UnitCostY1}"/>
                                                            </apex:outputText>
                                                            <apex:outputText id="txtUnitCostY2First" value="{0,number,##,###,##0.00}" style="display:{!if(strSelectedYearAssumption == 'Year2','','none')};">
                                                                <apex:param value="{!objBL.UnitCostY2}"/>
                                                            </apex:outputText>
                                                            <apex:outputText id="txtUnitCostY3First" value="{0,number,##,###,##0.00}" style="display:{!if(strSelectedYearAssumption == 'Year3','','none')};">
                                                                <apex:param value="{!objBL.UnitCostY3}"/>
                                                            </apex:outputText>
                                                            <apex:outputText id="txtUnitCostY4First" value="{0,number,##,###,##0.00}" style="display:{!if(strSelectedYearAssumption == 'Year4','','none')};">
                                                                <apex:param value="{!objBL.UnitCostY4}"/> 
                                                            </apex:outputText> 
                                                        </td>
                                                        <td class="dataCell TDstyle" ></td>
                                                        <td class="dataCell TDstyle"></td>
                                                        
                                                    </tr>
                                                    <tr>
                                                        <td class="dataCell TDstyle" colspan="12" style="text-align:center;">
                                                            
                                                            <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-success" style="width:37px;align:right;" onclick="return SaveAssumptionRecords('NewAssumptionTRFirst{!Count}','False');" rendered="{!blnEdit}">
                                                                <strong>{!$Label.Save}</strong>
                                                            </apex:commandLink>
                                                            <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-success" style="width:85px;align:right;" onclick="return SaveAssumptionRecords('NewAssumptionTRFirst{!Count}','True');" status="Processing" rerender="frm" rendered="{!blnEdit}">
                                                              <!-- <apex:param value="{!Count-1}" name="CancelIndex" id="SaveCancelIndex1"/> -->
                                                                <strong>{!$Label.Save_and_Close}</strong>
                                                            </apex:commandLink>
                                                            <apex:commandLink styleClass="TGFbtn TGFbtn-mini TGFbtn-danger" style="align:left;" oncomplete="location.reload();" action="{!CancelAssumptionRecords}" status="Processing" rerender="tstpopup1" > 
                                                                <apex:param value="{!Count-1}" name="CancelIndex" id="CancelIndex1"/>
                                                                <strong>{!$Label.Cancel}</strong>
                                                            </apex:commandLink>
                                                        </td>
                                                    </tr>
                                                </table>
                                                </apex:outputPanel>
                                                                                 
                                            </apex:outputPanel>
                                        </apex:outputPanel>
<!------------End Assumption Popup----------------------->                                   
                                        &nbsp;&nbsp;                                       
                                        <apex:commandLink id="cmdLinkDeleteGoal" styleClass="TGFbtn TGFbtn-mini TGFbtn-danger" style="width:30px;height:25px;margin-top:6px;display:{!if(objBL.blnIsEditable != true,'none','')};" onclick="return OpenDeletePopup('{!$Component.tstpopup}')" rendered="{!blnDelete}">
                                            <i class="icon-trash icon-white" style="margin-top:6px"></i> 
                                        </apex:commandLink>
<!------------Start AssumptionSet Delete Popup-----------------------> 
                                        <apex:outputPanel id="tstpopup" style="display:none;">
                                            <apex:outputPanel id="popupBackground" styleClass="popupBackground"/>
                                            <apex:outputPanel id="custPopup" styleClass="custPopup">
                                                <table width="100%" cellspacing="0" cellpadding="0" border="0" >
                                                    <tr>
                                                        <td colspan="3" class="deletePopup">
                                                            <apex:outputtext style="color:#6590c4; font-size: 13.9pt;font-weight: bold;" value="Are you sure?"/>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="3" class="deletePopup">
                                                            <apex:outputtext style="color:#6590c4; font-size: 13.9pt;font-weight: bold;" value="{!$Label.Delete_Assumption}"/>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td width="47%" class="deletePopup">
                                                            <apex:commandButton styleClass="popupButtonYes" value="Yes" action="{!DeleteBudgetLine}" reRender="frm,tstpopup1" status="Processing">
                                                                <apex:param value="{!Count-1}" name="DeleteIndex" />
                                                            </apex:commandButton>
                                                        </td>
                                                        <td width="6%" class="deletePopup"></td>
                                                        <td width="47%" align="left" class="deletePopupCancel">
                                                            <apex:commandButton styleClass="popupButtonCancel" value="Cancel" onclick="return ClosePopup('{!$Component.tstpopup}');"/>
                                                        </td>
                                                    </tr>
                                                </table>
                                            </apex:outputPanel>
                                        </apex:outputPanel>
<!------------End AssumptionSet Delete Popup----------------------->
                                    </td>
                                    <td class="dataCell TDstyle">
                                        <apex:outputText value="{!objBL.objAssumptionSet.Name}"/>
                                    </td>
                                    <td class="dataCell TDstyle">
                                        <apex:selectList value="{!objBL.objAssumptionSet.Cost_Input__c}" size="1" style="width:150px;" rendered="{!!objBL.blnIsEditable}" onchange="SelectUnitOfmeasure(this,'{!Count-1}','{!$Component.txtUnitMeasure}');">
                                            <apex:selectOptions value="{!CostInputOptions}"></apex:selectOptions>
                                        </apex:selectList>                                       
                                        <apex:outputText value="{!objBL.strCostInputName}" rendered="{!objBL.blnIsEditable}"/> 
                                    </td>
                                    <td class="dataCell TDstyle">
                                        <apex:outputText value="{!objBL.NumberOfBudgetLine}"/>    
                                    </td>
                                    <td class="dataCell TDstyle"> 
                                        <apex:outputText value="{!objBL.NumberOfAssumption}"/>    
                                    </td>
                                    <td>
                                        <apex:commandLink id="cmdLinkMassUpdate" styleClass="TGFbtn TGFbtn-mini TGFbtn-success" rendered="{!blnMassUpdate}" action="{!MassUpdate}" rerender="frm" status="Processing">
                                            <apex:param value="{!Count-1}" name="UpdateIndex"/>
                                            <strong>Mass Update</strong>                                            
                                        </apex:commandLink>
                                    </td>                                     
                                 </tr>
                                 <apex:variable value="{!Count + 1}" var="Count"/>
                             </apex:repeat>
<!--CONTINUE BUDGET LINE TABLE-->                          
                             <tr id="newBudgetLine1" style="display:none;">
                                <td>                                    
                                    <apex:commandLink id="cmdLinkDeleteGoal" styleClass="TGFbtn TGFbtn-mini TGFbtn-danger" style="width:30px;height:25px;margin-top:6px;" onclick="return CancelNewBudgetlineRow();">
                                        <i class="icon-trash icon-white" style="margin-top:6px"></i> 
                                    </apex:commandLink>                                   
                                </td> 
                                <td class="dataCell TDstyle" >
                                        <apex:inputText id="txtAssumptionName" value="{!objAssumptionSetNewRow.Name}" style="width:180px;"/>
                                </td>
                                <td class="dataCell TDstyle">
                                   <apex:selectList value="{!objAssumptionSetNewRow.Cost_Input__c}" id="CostInputNewRow" size="1" style="width:180px;" >
                                       <apex:selectOptions value="{!CostInputOptions}"/>
                                   </apex:selectList>                                                  
                                </td>
                                <td colspan="2" style="border-bottom:0px !important;text-align:center;">
                                    <apex:actionFunction name="actSaveBudgetLines1" action="{!SaveBudgetLines}" reRender="frm" status="Processing">
                                        <apex:param value="{!if(lstwrapAssumptionSet.size > 0,lstwrapAssumptionSet.size+1,1)}" name="SaveIndex" id="SaveIndex1"/>
                                    </apex:actionFunction>
                                    <apex:commandLink styleClass="TGFbtn TGFbtn-success -left"  style="width:160px;" Status="Processing" onclick="return validateSaveNew('newBudgetLine1');" rerender="tstpopup1">
                                        <i class="icon-plus icon-white"></i> 
                                        <strong>{!$Label.Save}</strong>
                                    </apex:commandLink>                  
                                </td>                                        
                            </tr>
 <!---Add New Row Assumption Set----------->
                            <tr id="btnAddBudgetLine">
                             <td style="border-bottom:0px !important;border-top:0px">
                                 <apex:commandLink styleClass="TGFbtn TGFbtn-success pull-right" onclick="return DisplayNewBudgetlineRow();" style="width:160px;" rerender="frm" rendered="{!blnAddAS}">
                                    <i class="icon-plus icon-white"></i> 
                                    <strong>{!$Label.Add_Assumption_Set}</strong>
                                 </apex:commandLink>
                             </td>
                         </tr>                             
                    </table>
                </td>
            </tr>
        </table>
    </div>
    <style>
        .ProcessingBackground
        {
            background-color: black;
            opacity: 0.50;
            filter: alpha(opacity = 50);
            width: 100%;
            height: 100%;
            position: fixed;
            z-index: 9999;
            top:0;
            left:0;
        }
        .Processing
        {
            z-index: 9999;
            left: 50%;
            top: 50%;
            text-align: center;
            position: fixed;
        }        
    </style>
    <!------------Processing Div----------------->
    <div id="divProcessing" style="display:none;">
        <div class="ProcessingBackground"></div>
        <div class="Processing">
            <apex:image alt="Processing" url="{!$Resource.LoadingCircle}" />
        </div>
    </div>  
    <apex:actionStatus id="Processing" onstart="document.getElementById('divProcessing').style.display = '';" onstop="document.getElementById('divProcessing').style.display = 'none';">                            
    </apex:actionStatus> 
    <script>
        /*function displayYearToggle(thisTH,SelectedYear,NewYear,NewYearth,NewYeartd){
            var AllTD = document.getElementsByTagName("td");
            var AllTH = document.getElementsByTagName("th");
            var hdnYear = document.getElementById(SelectedYear);
            var thId;
            var tdId;
            if(hdnYear.value == 'Year1'){
                thId = 'Year1th';
                tdId = 'Year1td';
            }else if(hdnYear.value == 'Year2'){
                thId = 'Year2th';
                tdId = 'Year2td';
            }else if(hdnYear.value == 'Year3'){
                thId = 'Year3th';
                tdId = 'Year3td';
            }else if(hdnYear.value == 'Year4'){
                thId = 'Year4th';
                tdId = 'Year4td';
            }
            if(hdnYear.value != NewYear){
                for(var i=0;i<AllTD.length;i++){
                    if(AllTD[i].id == tdId){
                        AllTD[i].style.display = 'none';
                    }else if(AllTD[i].id == NewYeartd){
                        AllTD[i].style.display = '';
                    }
                }
                for(var i=0;i<AllTH.length;i++){
                    if(AllTH[i].id == thId){
                        AllTH[i].style.display = 'none';
                    }else if(AllTH[i].id == NewYearth){
                        AllTH[i].style.display = '';
                    }
                }                  
                document.getElementById(thisTH).style.background = '#434445';
                document.getElementById(thisTH).style.color = '#FFFFFF';
                if(hdnYear.value == 'Year1'){
                    document.getElementById('MainThYear1').style.background = '#DFEFF0';
                    document.getElementById('MainThYear1').style.color = '#00688B';
                }else if(hdnYear.value == 'Year2'){
                    document.getElementById('MainThYear2').style.background = '#E7F2D5';
                    document.getElementById('MainThYear2').style.color = '#00688B';
                }else if(hdnYear.value == 'Year3'){
                    document.getElementById('MainThYear3').style.background = '#FAF3CA';
                    document.getElementById('MainThYear3').style.color = '#00688B';
                }else if(hdnYear.value == 'Year4'){
                    document.getElementById('MainThYear4').style.background = '#F0E1E2';
                    document.getElementById('MainThYear4').style.color = '#00688B';
                }
                document.getElementById(SelectedYear).value = NewYear;
            }
        } */
        
       function displayYearToggleAssumption(thisTH,SelectedYear,NewYear,NewYearth,NewYeartd,isHR,isTRC){
                var AllTD = document.getElementsByTagName("td");
                var AllTH = document.getElementsByTagName("th");
                
                var hdnYear = document.getElementById(SelectedYear);
                var thId;
                var tdId;
                var DthId;
                var DtdId;
                var NewYearthD;
                var NewYeartdD;
                if(hdnYear.value == 'Year1'){
                    thId = 'Year1thA';
                    tdId = 'Year1tdA';
                    DthId = 'DurationTh1';
                    DtdId = 'DurationTd1';
                    
                }else if(hdnYear.value == 'Year2'){
                    thId = 'Year2thA';
                    tdId = 'Year2tdA';
                    DthId = 'DurationTh2';
                    DtdId = 'DurationTd2';
                }else if(hdnYear.value == 'Year3'){
                    thId = 'Year3thA';
                    tdId = 'Year3tdA';
                    DthId = 'DurationTh3';
                    DtdId = 'DurationTd3';
                }else if(hdnYear.value == 'Year4'){
                    thId = 'Year4thA';
                    tdId = 'Year4tdA';
                    DthId = 'DurationTh4';
                    DtdId = 'DurationTd4';
                }
                if(NewYear == 'Year1'){
                    NewYearthD = 'DurationTh1';
                    NewYeartdD = 'DurationTd1';
                }else if(NewYear == 'Year2'){
                    NewYearthD = 'DurationTh2';
                    NewYeartdD = 'DurationTd2';
                }else if(NewYear == 'Year3'){
                    NewYearthD = 'DurationTh3';
                    NewYeartdD = 'DurationTd3';
                }else if(NewYear == 'Year4'){
                    NewYearthD = 'DurationTh4';
                    NewYeartdD = 'DurationTd4';
                }
                if(hdnYear.value != NewYear){
                    for(var i=0;i<AllTD.length;i++){
                        if(AllTD[i].id == tdId){
                            AllTD[i].style.display = 'none';
                        }else if(AllTD[i].id == NewYeartd){
                            AllTD[i].style.display = '';
                        }
                        if(isTRC == true){
                            if(AllTD[i].id == DtdId){
                                AllTD[i].style.display = 'none';
                            }else if(AllTD[i].id == NewYeartdD){
                                AllTD[i].style.display = '';
                            }
                        }
                    }
                    for(var i=0;i<AllTH.length;i++){
                        if(AllTH[i].id == thId){
                            AllTH[i].style.display = 'none';
                        }else if(AllTH[i].id == NewYearth){
                            AllTH[i].style.display = '';
                        }
                        if(isTRC == true){
                            if(AllTH[i].id == DthId){
                                AllTH[i].style.display = 'none';
                            }else if(AllTH[i].id == NewYearthD){
                                AllTH[i].style.display = '';
                            }
                        }
                    }
                    
                    var TYCY1;
                    var TYCY2;
                    var TYCY3;
                    var TYCY4;
                    if(isHR == true){
                        TYCY1 = 'txtTotalUnitCostY1First';
                        TYCY2 = 'txtTotalUnitCostY2First';
                        TYCY3 = 'txtTotalUnitCostY3First';
                        TYCY4 = 'txtTotalUnitCostY4First';
                        
                        UCY1 = 'txtUnitCostY1First';
                        UCY2 = 'txtUnitCostY2First';
                        UCY3 = 'txtUnitCostY3First';
                        UCY4 = 'txtUnitCostY4First';
                    }else{
                        TYCY1 = 'txtTotalUnitCostY1';
                        TYCY2 = 'txtTotalUnitCostY2';
                        TYCY3 = 'txtTotalUnitCostY3';
                        TYCY4 = 'txtTotalUnitCostY4';
                        
                        UCY1 = 'txtUnitCostY1';
                        UCY2 = 'txtUnitCostY2';
                        UCY3 = 'txtUnitCostY3';
                        UCY4 = 'txtUnitCostY4';
                    }
                    
                    document.getElementById(thisTH).style.background = '#434445';
                    document.getElementById(thisTH).style.color = '#FFFFFF';
                    if(NewYear=='Year1'){
                        var TotalObj = document.getElementById(SelectedYear.replace("hdnSelectedYearA",TYCY1));
                        TotalObj.style.display = '';                        
                        var Obj = document.getElementById(SelectedYear.replace("hdnSelectedYearA",UCY1));
                        Obj.style.display = '';
                       /* document.getElementById('NumPersonY1').style.display = '';
                         document.getElementById('NumPersonY2').style.display = 'none';
                         document.getElementById('NumPersonY3').style.display = 'none';
                         document.getElementById('NumPersonY4').style.display = 'none';*/
                    }else if(NewYear=='Year2'){
                        var TotalObj = document.getElementById(SelectedYear.replace("hdnSelectedYearA",TYCY2));
                        TotalObj.style.display = '';                        
                        var Obj = document.getElementById(SelectedYear.replace("hdnSelectedYearA",UCY2));
                        /* document.getElementById('NumPersonY1').style.display = 'none';
                         document.getElementById('NumPersonY2').style.display = '';
                         document.getElementById('NumPersonY3').style.display = 'none';
                         document.getElementById('NumPersonY4').style.display = 'none';*/
                        Obj.style.display = '';
                    }else if(NewYear=='Year3'){
                        var TotalObj = document.getElementById(SelectedYear.replace("hdnSelectedYearA",TYCY3));
                        TotalObj.style.display = '';                        
                        var Obj = document.getElementById(SelectedYear.replace("hdnSelectedYearA",UCY3));
                        Obj.style.display = '';
                       /* document.getElementById('NumPersonY1').style.display = 'none';
                         document.getElementById('NumPersonY2').style.display = 'none';
                         document.getElementById('NumPersonY3').style.display = '';
                         document.getElementById('NumPersonY4').style.display = 'none';*/
                    }else if(NewYear=='Year4'){
                        var TotalObj = document.getElementById(SelectedYear.replace("hdnSelectedYearA",TYCY4));
                        TotalObj.style.display = '';
                        var Obj = document.getElementById(SelectedYear.replace("hdnSelectedYearA",UCY4));
                        Obj.style.display = '';
                       /* document.getElementById('NumPersonY1').style.display = 'none';
                         document.getElementById('NumPersonY2').style.display = 'none';
                         document.getElementById('NumPersonY3').style.display = 'none';
                         document.getElementById('NumPersonY4').style.display = '';*/
                    }
                    if(hdnYear.value == 'Year1'){
                        document.getElementById('MainThYear1A').style.background = '#DFEFF0';
                        document.getElementById('MainThYear1A').style.color = '#00688B';
                        var TotalObj = document.getElementById(SelectedYear.replace("hdnSelectedYearA",TYCY1));
                        TotalObj.style.display = 'none';
                        var Obj = document.getElementById(SelectedYear.replace("hdnSelectedYearA",UCY1));
                        Obj.style.display = 'none';
                    }else if(hdnYear.value == 'Year2'){
                        document.getElementById('MainThYear2A').style.background = '#E7F2D5';
                        document.getElementById('MainThYear2A').style.color = '#00688B';                        
                        var TotalObj = document.getElementById(SelectedYear.replace("hdnSelectedYearA",TYCY2));
                        TotalObj.style.display = 'none';
                        var Obj = document.getElementById(SelectedYear.replace("hdnSelectedYearA",UCY2));
                        Obj.style.display = 'none';
                    }else if(hdnYear.value == 'Year3'){
                        document.getElementById('MainThYear3A').style.background = '#FAF3CA';
                        document.getElementById('MainThYear3A').style.color = '#00688B';
                        var TotalObj = document.getElementById(SelectedYear.replace("hdnSelectedYearA",TYCY3));
                        TotalObj.style.display = 'none';
                        var Obj = document.getElementById(SelectedYear.replace("hdnSelectedYearA",UCY3));
                        Obj.style.display = 'none';
                    }else if(hdnYear.value == 'Year4'){
                        document.getElementById('MainThYear4A').style.background = '#F0E1E2';
                        document.getElementById('MainThYear4A').style.color = '#00688B';
                        var TotalObj = document.getElementById(SelectedYear.replace("hdnSelectedYearA",TYCY4));
                        TotalObj.style.display = 'none';
                        var Obj = document.getElementById(SelectedYear.replace("hdnSelectedYearA",UCY4));
                        Obj.style.display = 'none';
                    }
                    document.getElementById(SelectedYear).value = NewYear;
                }
            }
        
        function CalculateAmount(YearAmount,Quantity){
            var QuantityValue = document.getElementById(Quantity).value;
            if(QuantityValue == '' || QuantityValue == null) QuantityValue = 0;           
            var Amount = parseInt(YearAmount) * parseInt(QuantityValue);
            return Amount;
        }
        
        function CalculateQuantity(Quantity){ 
            var QuantityValue = document.getElementById(Quantity).value;
            if(QuantityValue == '' || QuantityValue == null) QuantityValue = 0;           
            return QuantityValue;
        }
        
      
        function DisplayNewBudgetlineRow(){
            document.getElementById('newBudgetLine1').style.display = '';
            //document.getElementById('newBudgetLine2').style.display = '';
            document.getElementById('btnAddBudgetLine').style.display = 'none';
            return false;
        }
         function CancelNewBudgetlineRow(){
            document.getElementById('newBudgetLine1').style.display = 'none';
            document.getElementById('btnAddBudgetLine').style.display = '';
            document.getElementById('page:frm:CostInputNewRow').value = '';
            document.getElementById('page:frm:txtAssumptionName').value = '';
            return false;     
        } 
        function validateSaveNew(GIvalue){
            if(document.getElementById(GIvalue).value != ''){
                actSaveBudgetLines1();
                return false;
            }else{
                alert('You must select Grant Intervention before save.');
                return false;
            }
        }
        
        function SelectUnitOfmeasure(CostInputValue,SelectIndex,UnitMeasure){
            if(CostInputValue.value != ''){
                actSelectUnitMeasure(SelectIndex);
                return false;
            }else{
                document.getElementById(UnitMeasure).innerHTML = '';
                return false;
            }
        }
        
        function SelectUnitOfmeasureNew(CostInputValue,CostInputId,UnitMeasure){
            if(CostInputValue.value != ''){
                actSelectUnitMeasureNew(CostInputId);
                return false;
            }else{
                document.getElementById(UnitMeasure).innerHTML = '';
                return false;
            }
        }            
        function completeOnchangeNewRow(){
            document.getElementById('newBudgetLine1').style.display = '';
            //document.getElementById('newBudgetLine2').style.display = '';
            document.getElementById('btnAddBudgetLine').style.display = 'none';
        }
        function OpenDeletePopup(popupId){
            document.getElementById(popupId).style.display = '';
            return false;
        }
        function ClosePopup(popupId){
            document.getElementById(popupId).style.display = 'none';
            return false;
        }
        
        function openAssumptionDeletePopup(popupId){
            document.getElementById(popupId).style.display = '';
            return false;
        }
        function CloseAssumptionPopup(popupId){
            document.getElementById(popupId).style.display = 'none';
            return false;
        }
        
        function EditAssumption(EditIndex){
            document.getElementById('page:frm:hdnIndex').value = EditIndex;
        }
        var globalTR;
        var globalBtn;
        var globalhide;
        var globalIndex;
        var globalBLUnitMeasure;
        var globalAssUnitMeasure;
        function AddNewAssumption(trid,btnid,hide,Index,meas,UMNew,Currency){
                globalTR = trid;
                globalBtn = btnid;
                globalhide = hide;
                globalIndex = Index;
                globalAssUnitMeasure = UMNew;
                globalBLUnitMeasure = meas;
                document.getElementById(trid).style.display = '';
                document.getElementById(UMNew).innerHTML = meas;
                document.getElementById(btnid).style.display = 'none';
                document.getElementById(hide).style.display = '';
                document.getElementById(Currency).selectedIndex = 0;
                return false;
            }
       
            function CancelAssumption(trid,btnid,hide,index,size){
                document.getElementById(trid).style.display = 'none';
                document.getElementById(btnid).style.display = '';
                document.getElementById(hide).style.display = 'none';
                globalTR ='';
                globalBtn ='';
                globalhide = '';
                globalIndex = '';
                commonCall(index,size);
                if(size > 0){
                var closeAss = 'False';
                actSaveAssumption(closeAss,false);
                }else{
                    console.log('In Else Condition');
                    document.getElementById('page:frm:rptBudgetLine:'+index+':txtUnitCostY1').innerHTML = '';
                    document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalUnitCostY1').innerHTML ='';
                    document.getElementById('page:frm:rptBudgetLine:'+index+':txtUnitCostY2').innerHTML = '';
                    document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalUnitCostY2').innerHTML ='';
                    document.getElementById('page:frm:rptBudgetLine:'+index+':txtUnitCostY3').innerHTML = 0;
                    document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalUnitCostY3').innerHTML =0;
                    document.getElementById('page:frm:rptBudgetLine:'+index+':txtUnitCostY4').innerHTML = 0;
                    document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalUnitCostY4').innerHTML =0;
                }
                
                return false;
            }
            function commonCall(index,size){
                console.log('In Commoncall Condition');
                document.getElementById('page:frm:rptBudgetLine:'+index+':idItemDecNew').value = '';
                //document.getElementById('page:frm:rptBudgetLine:'+index+':txtCurrencyUsedNew').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':idUnitMeasureNew').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY1UnitCostNew').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY1QuantityNew').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalCostY1New').innerHTML = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY2UnitCostNew').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY2QuantityNew').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalCostY2New').innerHTML = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY3UnitCostNew').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY3QuantityNew').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalCostY3New').innerHTML = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY4UnitCostNew').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY4QuantityNew').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalCostY4New').innerHTML = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtRateY1New').innerHTML = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtRateY2New').innerHTML = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtRateY3New').innerHTML = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtRateY4New').innerHTML = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':idSupportNew').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':idJustificationNew').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY1DurationDaysNew').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY2DurationDaysNew').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY3DurationDaysNew').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY4DurationDaysNew').value = '';
              }
            function CancelAssumption1(trid,btnid,hide,index,size){
                document.getElementById(trid).style.display = 'none';
                document.getElementById(btnid).style.display = '';
                document.getElementById(hide).style.display = 'none';
                globalTR ='';
                globalBtn ='';
                globalhide = '';
                globalIndex = '';
                commoncallHR(index);
                if(size > 0){
                var closeAss = 'False';
                actSaveAssumption(closeAss,false);
                }
                else{
                    console.log('In Else Condition');
                    document.getElementById('page:frm:rptBudgetLine:'+index+':txtUnitCostY1First').innerHTML = '';
                    document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalUnitCostY1First').innerHTML ='';
                    document.getElementById('page:frm:rptBudgetLine:'+index+':txtUnitCostY2First').innerHTML = '';
                    document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalUnitCostY2First').innerHTML ='';
                    document.getElementById('page:frm:rptBudgetLine:'+index+':txtUnitCostY3First').innerHTML = 0;
                    document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalUnitCostY3First').innerHTML =0;
                    document.getElementById('page:frm:rptBudgetLine:'+index+':txtUnitCostY4First').innerHTML = 0;
                    document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalUnitCostY4First').innerHTML =0;
                }
                return false;
                
             } 
            function commoncallHR(index){                
                document.getElementById('page:frm:rptBudgetLine:'+index+':idItDecNewFirst').value = '';                
                document.getElementById('page:frm:rptBudgetLine:'+index+':idUMNewFirst').value = '';                
               // document.getElementById('page:frm:rptBudgetLine:'+index+':txtCurrencyUsedFirstNew').value = '';
                
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY1UnitCostNewFirst').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY1ChargesNewFirst').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalSalaryY1NewFirst').innerHTML = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalSalaryY1NewFirstRate').innerHTML = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY1LevelNewFirst').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY1NumberNewFirst').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalCostY1NewFirst').innerHTML = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtRateY1NewFirst').innerHTML = '';
                
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY2UnitCostNewFirst').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY2ChargesNewFirst').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalSalaryY2NewFirst').innerHTML = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalSalaryY2NewFirstRate').innerHTML = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY2LevelNewFirst').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY2NumberNewFirst').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalCostY2NewFirst').innerHTML = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtRateY2NewFirst').innerHTML = '';
                
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY3UnitCostNewFirst').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY3ChargesNewFirst').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalSalaryY3NewFirst').innerHTML = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalSalaryY3NewFirstRate').innerHTML = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY3LevelNewFirst').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY3NumberNewFirst').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalCostY3NewFirst').innerHTML = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtRateY3NewFirst').innerHTML = '';
                
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY4UnitCostNewFirst').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY4ChargesNewFirst').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalSalaryY4NewFirst').innerHTML = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalSalaryY4NewFirstRate').innerHTML = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY4LevelNewFirst').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtY4NumberNewFirst').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalCostY4NewFirst').innerHTML = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':txtRateY4NewFirst').innerHTML = '';
                
                document.getElementById('page:frm:rptBudgetLine:'+index+':idSuppoetFirstNew').value = '';
                document.getElementById('page:frm:rptBudgetLine:'+index+':idJCFirstNew').value = '';              
                console.log('1 '+document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalSalaryY1NewFirstRate').innerHTML);
                console.log('2 '+document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalSalaryY2NewFirstRate').innerHTML);
                console.log('3 '+document.getElementById('page:frm:rptBudgetLine:'+index+':txtTotalSalaryY3NewFirstRate').innerHTML);
            }
     
        function CalculateTotalCost(YearIndex,Cost,Duration,Quantity,TotalCost,CurrencyRate,Currency,Index,size,Type,NumofPerson){
                console.log('Inside the Script');
                var txtCost = document.getElementById(Cost).value;
                var txtDuration = document.getElementById(Duration).value;
                var txtQuantity = document.getElementById(Quantity).value;               
                var txtNumofPerson = document.getElementById(NumofPerson).value;   
                var intDurationIndex=parseInt(YearIndex);
                var MaxNumberofPersons = 0;
                var MaxDuration =0;
                txtCost = RemoveComma(txtCost);
                txtDuration = RemoveComma(txtDuration);
                txtNumofPerson = RemoveComma(txtNumofPerson);
                //txtDuration = parseFloat(txtDuration);
                txtQuantity = RemoveComma(txtQuantity);
                console.log('txtDuration '+txtDuration);
                //Code for getting the highest value of Number of Person
                /*var NumPerson1;
                var NumPerson2;
                var NumPerson3;
                var NumPerson4;
                if(Type == true){
                 NumPerson1 = document.getElementById('page:frm:rptBudgetLine:'+Index+':Y1NumPerson').value;
                 NumPerson2 = document.getElementById('page:frm:rptBudgetLine:'+Index+':Y2NumPerson').value;
                 NumPerson3 = document.getElementById('page:frm:rptBudgetLine:'+Index+':Y3NumPerson').value;
                 NumPerson4 = document.getElementById('page:frm:rptBudgetLine:'+Index+':Y4NumPerson').value;
                }
                if(NumPerson1 == null) NumPerson1=0;
                else NumPerson1 = parseFloat(Math.floor(parseFloat(RemoveComma(NumPerson1))));
                if(NumPerson2 == null) NumPerson2=0;
                else NumPerson2 = parseFloat(Math.floor(parseFloat(RemoveComma(NumPerson2))));
                if(NumPerson3 == null) NumPerson3=0;
                else NumPerson3 = parseFloat(Math.floor(parseFloat(RemoveComma(NumPerson3))));
                if(NumPerson4 == null) NumPerson4=0;
                else NumPerson4 = parseFloat(Math.floor(parseFloat(RemoveComma(NumPerson4))));
                var NumPersons = [NumPerson1,NumPerson2,NumPerson3,NumPerson4];
                console.log('NumPersons '+NumPersons);
                console.log('Type '+Type);
                var count =0;
                for (var i=0;i<NumPersons.length;i++){
                    if(count < NumPersons[i]) count= NumPersons[i];
                }
                console.log('Count Value '+count);*/ 
                 if(document.getElementById('DurationTd'+intDurationIndex).style.display != 'none'){
                    for(var i=0;i<size;i++){
                    console.log('Number of Person Value ' +document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtY'+YearIndex+'NumofPerson').value);
                        if(parseInt(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtY'+YearIndex+'NumofPerson').value))>parseInt(MaxNumberofPersons))
                            MaxNumberofPersons = RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtY'+YearIndex+'NumofPerson').value);
                        console.log('Max Number of Persons NumOfPersonsNew '+ MaxNumberofPersons);
                        if(parseInt(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtY'+YearIndex+'DurationDays').value))>parseInt(MaxDuration))
                            MaxDuration = RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtY'+YearIndex+'DurationDays').value);
                    
                    }
                }
                console.log('Max Number of Person '+MaxNumberofPersons);
                //Script for highest value of Number of Person ends here
                
                if(txtCost == '' || txtCost == null) txtCost = 0;
                if(txtDuration == '' || txtDuration == null) txtDuration = 0;
                if(txtQuantity == '' || txtQuantity == null) txtQuantity = 0;
                if(txtNumofPerson == '' || txtNumofPerson == null) txtNumofPerson =0;
                
                var Total;
                
                if(document.getElementById('DurationTd'+intDurationIndex).style.display != 'none'){
                    Total = txtCost * txtDuration * txtQuantity * txtNumofPerson;
                }else{
                    Total = txtCost * txtQuantity;
                }
                
                if(Total == 0 || isNaN(Total)){
                    document.getElementById(TotalCost).innerHTML = '';
                    document.getElementById(CurrencyRate).innerHTML = '';
                }else{
                    Total = (Total).toFixed(2);
                    document.getElementById(TotalCost).innerHTML = addCommas(Total.toString())+ '('+document.getElementById(Currency).options[document.getElementById(Currency).selectedIndex].text+')';
                    if(document.getElementById(Currency).options[document.getElementById(Currency).selectedIndex].text == '{!strLocalCurrency}'){
                        document.getElementById(CurrencyRate).innerHTML = addCommas(((Total * parseFloat(document.getElementById('page:frm:hdnstrLocalCurrencyRate').value)).toFixed(2)).toString()) + '({!strGrantCurrency})';
                    }
                    if(document.getElementById(Currency).options[document.getElementById(Currency).selectedIndex].text == '{!strOtherCurrency}'){
                        document.getElementById(CurrencyRate).innerHTML = addCommas(((Total * parseFloat(document.getElementById('page:frm:hdnstrOtherCurrencyRate').value)).toFixed(2)).toString())+ '({!strGrantCurrency})';
                    }
                } 
                  
                
                var TotalUcost = 0;
                var TotalQuantity = 0;
                for(var i=0;i<size;i++){
                    if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtY'+YearIndex+'Quantity').value != ''){
                        if(Type == false){
                        TotalQuantity += parseFloat(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtY'+YearIndex+'Quantity').value));
                        }else{
                            //TotalQuantity = count;
                            TotalQuantity = MaxNumberofPersons * MaxDuration;
                        }
                    }
                    
                    if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtRateY'+YearIndex).innerHTML == '' &&
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtTotalCostY'+YearIndex).innerHTML == ''){
                            TotalUcost += 0;
                        
                    }else if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtRateY'+YearIndex).innerHTML != ''){
                        TotalUcost += parseFloat(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtRateY'+YearIndex).innerHTML));
                    }else{
                        TotalUcost += parseFloat(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtTotalCostY'+YearIndex).innerHTML));
                    }
                }
                
                if(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtY'+YearIndex+'QuantityNew').value != ''){
                    if(Type == false){
                        TotalQuantity += parseFloat(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtY'+YearIndex+'QuantityNew').value));
                    }else{
                        //TotalQuantity = count;
                        if(parseInt(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtY'+YearIndex+'NumOfPersonsNew').value))>parseInt(MaxNumberofPersons))
                            MaxNumberofPersons = RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtY'+YearIndex+'NumOfPersonsNew').value);
                        if(parseInt(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtY'+YearIndex+'DurationDaysNew').value)>MaxDuration))
                            MaxNumberofPersons = RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtY'+YearIndex+'DurationDaysNew').value);
                        TotalQuantity = MaxNumberofPersons * MaxDuration;
                     }
                }
                
                var TotalnewCost = 0;
                if(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtRateY'+YearIndex+'New').innerHTML != ''){
                    TotalnewCost = parseInt(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtRateY'+YearIndex+'New').innerHTML));
                }else if(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalCostY'+YearIndex+'New').innerHTML != ''){
                    TotalnewCost = parseInt(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalCostY'+YearIndex+'New').innerHTML));
                }
                if(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalUnitCostY'+YearIndex).innerHTML != ''){
                    document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalUnitCostY'+YearIndex).innerHTML = '';
                }
                if(TotalnewCost == ''){
                    TotalnewCost = 0;
                } 
                if(TotalnewCost != 0){
                    TotalUcost = +TotalUcost + +TotalnewCost;
                }
                if(TotalUcost == 0 || isNaN(TotalUcost)){
                    document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalUnitCostY'+YearIndex).innerHTML = '';
                }else{
                    TotalUcost =TotalUcost.toFixed(2);
                    
                    document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalUnitCostY'+YearIndex).innerHTML = addCommas(TotalUcost.toString());
                    if(TotalQuantity == 0 || isNaN(TotalQuantity)){
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':txtUnitCostY'+YearIndex).innerHTML = ''; 
                    }
                    if(TotalQuantity != 0){
                        var TotalCostRe = 0;                        
                        TotalCostRe = parseFloat((parseFloat(TotalUcost) / parseFloat(TotalQuantity)).toFixed(2));
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':txtUnitCostY'+YearIndex).innerHTML = addCommas(TotalCostRe.toString());
                    }
                }
            }  
            
            function CalculateTotalCostNew(YearIndex,Cost,Duration,Quantity,TotalCost,Currency,CurrencyRate,Index,size,NumofPerson){
                var txtCost = document.getElementById(Cost).value;
                var txtDuration = document.getElementById(Duration).value;
                var txtQuantity = document.getElementById(Quantity).value;
                var txtNumberofPerson = document.getElementById(NumofPerson).value;
                txtCost = RemoveComma(txtCost);
                txtDuration = RemoveComma(txtDuration);
                txtDuration = parseFloat(parseFloat(txtDuration).toFixed(1));
                txtQuantity = RemoveComma(txtQuantity);
                txtNumberofPerson = RemoveComma(txtNumberofPerson);
                if(txtCost == '' || txtCost == null) txtCost = 0;
                if(txtDuration == '' || txtDuration == null) txtDuration = 0;
                if(txtQuantity == '' || txtQuantity == null) txtQuantity = 0;         
                if(txtNumberofPerson == '' || txtNumberofPerson == null) txtNumberofPerson = 0;  
                
                var intDurationIndex=parseInt(YearIndex);
                
                //Code for getting the highest value of Number of Person
                var NumPerson1;
                var NumPerson2;
                var NumPerson3;
                var NumPerson4;
               /* if(document.getElementById('DurationTd'+intDurationIndex).style.display != 'none'){
                 NumPerson1 = document.getElementById('page:frm:rptBudgetLine:'+Index+':Y1NumPerson').value;
                 NumPerson2 = document.getElementById('page:frm:rptBudgetLine:'+Index+':Y2NumPerson').value;
                 NumPerson3 = document.getElementById('page:frm:rptBudgetLine:'+Index+':Y3NumPerson').value;
                 NumPerson4 = document.getElementById('page:frm:rptBudgetLine:'+Index+':Y4NumPerson').value;
                }
                if(NumPerson1 == null) NumPerson1=0;
                else NumPerson1 = parseFloat(Math.floor(parseFloat(RemoveComma(NumPerson1))));
                if(NumPerson2 == null) NumPerson2=0;
                else NumPerson2 = parseFloat(Math.floor(parseFloat(RemoveComma(NumPerson2))));
                if(NumPerson3 == null) NumPerson3=0;
                else NumPerson3 = parseFloat(Math.floor(parseFloat(RemoveComma(NumPerson3))));
                if(NumPerson4 == null) NumPerson4=0;
                else NumPerson4 = parseFloat(Math.floor(parseFloat(RemoveComma(NumPerson4))));
                
                var NumPersons = [NumPerson1,NumPerson2,NumPerson3,NumPerson4];
                console.log('NumPersons '+NumPersons);
                var count =0;
                for (var i=0;i<NumPersons.length;i++){
                    if(count < NumPersons[i]) count= NumPersons[i];
                }
                console.log('Count Value '+count);*/
                
                //Script for highest value of Number of Person ends here
                var MaxDuration =0;
                var MaxNumberofPersons = 0;
                if(document.getElementById('DurationTd'+intDurationIndex).style.display != 'none'){
                    for(var i=0;i<size;i++){
                    console.log('Number of Person Value ' +document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtY'+YearIndex+'NumofPerson').value);
                        if(parseInt(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtY'+YearIndex+'NumofPerson').value))>parseInt(MaxNumberofPersons))
                            MaxNumberofPersons = RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtY'+YearIndex+'NumofPerson').value);
                        console.log('Max Number of Persons NumOfPersonsNew '+ MaxNumberofPersons);
                        if(parseInt(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtY'+YearIndex+'DurationDays').value))>parseInt(MaxDuration))
                            MaxDuration = parseInt(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtY'+YearIndex+'DurationDays').value));
                    
                    } 
                }
                if(document.getElementById('DurationTd'+intDurationIndex).style.display != 'none'){
                    var Total = txtCost * txtDuration * txtQuantity * txtNumberofPerson; //For Cost Grouping == '2. Travel' 
                }else{
                    var Total = txtCost * txtQuantity; // For Other Cost Grouping 
                }
                console.log('Total '+Total);
                if(Total == 0 || isNaN(Total)){
                    document.getElementById(TotalCost).innerHTML = '';
                    document.getElementById(CurrencyRate).innerHTML = '';
                }else{
                    Total = (Total).toFixed(2);
                    document.getElementById(TotalCost).innerHTML = addCommas(Total.toString())+ '('+document.getElementById(Currency).options[document.getElementById(Currency).selectedIndex].text+')';
                   if(document.getElementById(Currency).options[document.getElementById(Currency).selectedIndex].text == '{!strLocalCurrency}'){
                        document.getElementById(CurrencyRate).innerHTML = addCommas(parseFloat(((Total * parseFloat(document.getElementById('page:frm:hdnstrLocalCurrencyRate').value)).toFixed(2))).toString())+ '({!strGrantCurrency})';
                    }
                    if(document.getElementById(Currency).options[document.getElementById(Currency).selectedIndex].text == '{!strOtherCurrency}'){
                        document.getElementById(CurrencyRate).innerHTML = addCommas(parseFloat(((Total * parseFloat(document.getElementById('page:frm:hdnstrOtherCurrencyRate').value)).toFixed(2))).toString())+ '({!strGrantCurrency})';
                    } 
                } 
                console.log('CurrencyRate '+document.getElementById(CurrencyRate).innerHTML);
                var FinalTotalToAdd = 0;
                if(document.getElementById(CurrencyRate).innerHTML != ''){
                    FinalTotalToAdd = parseFloat(RemoveComma(document.getElementById(CurrencyRate).innerHTML));
                }else{
                    FinalTotalToAdd = Total;
                } 
                var TotalQuantityNew = 0;
                if(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtY'+YearIndex+'NumOfPersonsNew').value != ''){
                        console.log('TotalQuantityNew calculation');
                        if(document.getElementById('DurationTd'+intDurationIndex).style.display == 'none'){
                        console.log('TotalQuantityNew before calculation');
                        TotalQuantityNew = parseFloat(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtY'+YearIndex+'QuantityNew').value));
                        }else{
                            //if(size == 0)TotalQuantityNew = count;
                            if(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtY'+YearIndex+'NumOfPersonsNew').value)>MaxNumberofPersons)
                            MaxNumberofPersons = RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtY'+YearIndex+'NumOfPersonsNew').value);
                        }
                    } 
                    if(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtY'+YearIndex+'DurationDaysNew').value != ''){
                        console.log('TotalQuantityNew calculation');
                        if(document.getElementById('DurationTd'+intDurationIndex).style.display == 'none'){
                        console.log('TotalQuantityNew before calculation');
                        TotalQuantityNew = parseFloat(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtY'+YearIndex+'QuantityNew').value));
                        }else{
                           if(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtY'+YearIndex+'DurationDaysNew').value)>MaxDuration)
                            MaxDuration = RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtY'+YearIndex+'DurationDaysNew').value);
                        console.log('TotalQuantityNew after calculation '+MaxNumberofPersons);
                        }
                      } 
                var TotalUcost = 0; 
                var TotalQuantity = 0;
                if(size > 0){
                console.log('Size '+size);
                    for(var i=0;i<size;i++){
                        if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtY'+YearIndex+'Quantity').value != ''){
                            if(document.getElementById('DurationTd'+intDurationIndex).style.display != 'none'){
                                //TotalQuantity = MaxNumberofPersons*MaxDuration;
                                TotalQuantity = 0;
                            }else{
                                
                                TotalQuantity += parseFloat(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtY'+YearIndex+'Quantity').value));
                            }
                        } 
                        if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtRateY'+YearIndex).innerHTML == '' &&
                            document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtTotalCostY'+YearIndex).innerHTML == ''){
                                TotalUcost += 0;
                            
                        }else if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtRateY'+YearIndex).innerHTML != ''){
                            TotalUcost += parseFloat(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtRateY'+YearIndex).innerHTML));
                        }else{
                            TotalUcost += parseFloat(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtTotalCostY'+YearIndex).innerHTML));
                        }  
                    console.log('TotalUcost '+TotalUcost);
                        /*if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtTotalCostY'+YearIndex).innerHTML == ''){
                            TotalUcost += 0;
                        }else{
                            TotalUcost += parseInt(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLine:'+i+':txtTotalCostY'+YearIndex).innerHTML);
                        }*/
                    }  
                    console.log('FinalTotalToAdd '+FinalTotalToAdd);
                    TotalUcost = +TotalUcost + +FinalTotalToAdd;
                    console.log('TotalQuantity 4  else '+TotalQuantity);
                    //TotalQuantity = +TotalQuantity + +TotalQuantityNew;
                    if(document.getElementById('DurationTd'+intDurationIndex).style.display != 'none'){
                    TotalQuantity = MaxNumberofPersons*MaxDuration;
                    }else{
                        TotalQuantity = +TotalQuantity + +TotalQuantityNew;
                     }
                    console.log('TotalQuantity 5 else '+TotalQuantity);
                    console.log('TotalUcost after for loop '+TotalUcost);
                }else{
                   if(document.getElementById('DurationTd'+intDurationIndex).style.display == 'none'){
                    if(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtY'+YearIndex+'QuantityNew').value != ''){
                        TotalQuantity = TotalQuantity + parseFloat(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtY'+YearIndex+'QuantityNew').value));
                    }
                    }else{
                    console.log('TotalQuantity before else '+TotalQuantity);
                    //TotalQuantity = +TotalQuantity + +TotalQuantityNew;
                    TotalQuantity = MaxNumberofPersons*MaxDuration;
                    }
                    TotalUcost = FinalTotalToAdd;
                }
                
                if(document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalUnitCostY'+YearIndex).innerHTML != ''){
                    document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalUnitCostY'+YearIndex).innerHTML = '';
                }
                if(TotalUcost == 0 || isNaN(TotalUcost)){
                    document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalUnitCostY'+YearIndex).innerHTML = '';
                }else{
                    TotalUcost = parseFloat(TotalUcost).toFixed(2);
                    console.log('TotalUcost in else '+TotalUcost);
                    console.log('TotalQuantity in else '+TotalQuantity);
                    if(TotalQuantity == 0 || isNaN(TotalQuantity)){
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':txtUnitCostY'+YearIndex).innerHTML = ''; 
                    }
                    if(TotalQuantity != 0){
                    
                        var TotalCostRe = 0;
                        TotalCostRe = parseFloat((parseFloat(TotalUcost) / parseFloat(TotalQuantity)).toFixed(2));
                        console.log('TotalCostRe '+TotalCostRe);
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':txtUnitCostY'+YearIndex).innerHTML = addCommas(parseFloat(TotalCostRe.toString()));
                    }
                    document.getElementById('page:frm:rptBudgetLine:'+Index+':txtTotalUnitCostY'+YearIndex).innerHTML = addCommas(TotalUcost.toString());
                }
            } 
            //TCS 3/12/2014 Script for calculating Unit Cost On Change of Number Of Person 
            function OnChangeNumPerson(TotalCost1,TotalCost2,TotalCost3,TotalCost4,UnitCost1,UnitCost2,UnitCost3,UnitCost4,NumPerson1,NumPerson2,NumPerson3,NumPerson4){
                var TotalCostY1 = document.getElementById(TotalCost1).innerHTML;
                var TotalCostY2 = document.getElementById(TotalCost2).innerHTML;
                var TotalCostY3 = document.getElementById(TotalCost3).innerHTML;
                var TotalCostY4 = document.getElementById(TotalCost4).innerHTML;
                var NumPersonY1 = document.getElementById(NumPerson1).value;
                var NumPersonY2 = document.getElementById(NumPerson2).value;
                var NumPersonY3 = document.getElementById(NumPerson3).value;
                var NumPersonY4 = document.getElementById(NumPerson4).value;
                
                TotalCostY1 = RemoveComma(TotalCostY1);
                TotalCostY2 = RemoveComma(TotalCostY2);
                TotalCostY3 = RemoveComma(TotalCostY3);
                TotalCostY4 = RemoveComma(TotalCostY4);
                NumPersonY1 = RemoveComma(NumPersonY1);
                NumPersonY2 = RemoveComma(NumPersonY2);
                NumPersonY3 = RemoveComma(NumPersonY3);
                NumPersonY4 = RemoveComma(NumPersonY4);
                
                console.log('TotalCost '+TotalCostY1 +' '+TotalCostY2 +' ' +TotalCostY3+ ' '+TotalCostY4);
                console.log('NumOfPerson '+NumPersonY1 +' '+NumPersonY2 +' ' +NumPersonY3+ ' '+NumPersonY4);
                /*if(TotalCostY1 == null) TotalCostY1=0;
                if(TotalCostY2 == null) TotalCostY2=0;
                if(TotalCostY3 == null) TotalCostY3=0;
                if(TotalCostY4 == null) TotalCostY4=0;*/
                if(NumPerson1 == null) NumPerson1=0;
                else NumPerson1 = parseFloat(Math.floor(parseFloat(RemoveComma(NumPerson1))));
                if(NumPerson2 == null) NumPerson2=0;
                else NumPerson2 = parseFloat(Math.floor(parseFloat(RemoveComma(NumPerson2))));
                if(NumPerson3 == null) NumPerson3=0;
                else NumPerson3 = parseFloat(Math.floor(parseFloat(RemoveComma(NumPerson3))));
                if(NumPerson4 == null) NumPerson4=0;
                else NumPerson4 = parseFloat(Math.floor(parseFloat(RemoveComma(NumPerson4))));
                
                
                var NumPersons = [NumPersonY1,NumPersonY2,NumPersonY3,NumPersonY4];
                console.log('NumPersons '+NumPersons);
                var count =0;
                for (var i=0;i<NumPersons.length;i++){
                    if(count < NumPersons[i]) count= NumPersons[i];
                }
                console.log('Count Value '+count);
                if(TotalCostY1 != null)document.getElementById(UnitCost1).innerHTML = addCommas(Math.round((TotalCostY1 / count).toFixed(2)));
                if(TotalCostY2 != null)document.getElementById(UnitCost2).innerHTML = addCommas(Math.round((TotalCostY2 / count).toFixed(2)));
                if(TotalCostY3 != null)document.getElementById(UnitCost3).innerHTML = addCommas(Math.round((TotalCostY3 / count).toFixed(2)));
                if(TotalCostY4 != null)document.getElementById(UnitCost4).innerHTML = addCommas(Math.round((TotalCostY4 / count).toFixed(2)));
            }
            //TCS 3/12/2014 Script for calculating Unit Cost On Change of Number Of Person: End Here
            function CalculateTotalCostFirst(Cost,Charges,TotalSalary,Level,Number,TotalCost,Currency,CurrencyRate,Index,size,SelectedYear,TotalSalaryRate){
                console.log('Test');
                var txtCost = document.getElementById(Cost).value;
                var txtCharges = document.getElementById(Charges).value;
                
                var txtLevel = document.getElementById(Level).value;
                var txtNumber = document.getElementById(Number).value;
                 
                txtCost = RemoveComma(txtCost);
                txtCharges = RemoveComma(txtCharges);
                txtLevel = RemoveComma(txtLevel);
                txtLevel = parseFloat(Math.floor(parseFloat(txtLevel)));
                txtNumber = RemoveComma(txtNumber);
                txtNumber = parseFloat(Math.floor(parseFloat(txtNumber)));
                    
                if(txtCost == '' || txtCost == null) txtCost = 0;
                if(txtCharges == '' || txtCharges == null) txtCharges = 0;
                if(txtLevel == '' || txtLevel == null) txtLevel = 0;
                if(txtNumber == '' || txtNumber == null) txtNumber = 0;
                    
                var txtTotalSalary = parseFloat(parseFloat(txtCost)) + parseFloat(parseFloat(txtCharges));
                if(txtTotalSalary == 0 || isNaN(txtTotalSalary)){
                    document.getElementById(TotalSalary).innerHTML = '';
                    document.getElementById(TotalSalaryRate).innerHTML = '';
                }else{                    
                    document.getElementById(TotalSalary).innerHTML = addCommas((txtTotalSalary.toFixed(2)).toString())+ '('+document.getElementById(Currency).options[document.getElementById(Currency).selectedIndex].text+')';
                }
                if(document.getElementById(Currency).options[document.getElementById(Currency).selectedIndex].text == '{!strLocalCurrency}'){
                        document.getElementById(TotalSalaryRate).innerHTML = addCommas(((txtTotalSalary * parseFloat(document.getElementById('page:frm:hdnstrLocalCurrencyRate').value)).toFixed(2)).toString())+'({!strGrantCurrency})';
                    }
                    if(document.getElementById(Currency).options[document.getElementById(Currency).selectedIndex].text == '{!strOtherCurrency}'){
                        document.getElementById(TotalSalaryRate).innerHTML = addCommas(((txtTotalSalary * parseFloat(document.getElementById('page:frm:hdnstrOtherCurrencyRate').value)).toFixed(2)).toString()) +'({!strGrantCurrency})';
                    }
                    console.log(' txtLevel '+txtLevel+' txtNumber '+txtNumber);
                var txtTotalCost = txtTotalSalary * txtLevel * txtNumber;   
                if(txtTotalCost == 0 || isNaN(txtTotalCost)){
                    document.getElementById(TotalCost).innerHTML = '';
                    document.getElementById(CurrencyRate).innerHTML = '';
                }else{
                    txtTotalCost = (txtTotalCost/100).toFixed(2);
                    document.getElementById(TotalCost).innerHTML = addCommas(txtTotalCost.toString())+ '('+document.getElementById(Currency).options[document.getElementById(Currency).selectedIndex].text+')';
                   
                    if(document.getElementById(Currency).options[document.getElementById(Currency).selectedIndex].text == '{!strLocalCurrency}'){
                        document.getElementById(CurrencyRate).innerHTML = addCommas(((txtTotalCost * parseFloat(document.getElementById('page:frm:hdnstrLocalCurrencyRate').value)).toFixed(2)).toString())+'({!strGrantCurrency})';
                    }
                    if(document.getElementById(Currency).options[document.getElementById(Currency).selectedIndex].text == '{!strOtherCurrency}'){
                        document.getElementById(CurrencyRate).innerHTML = addCommas(((txtTotalCost * parseFloat(document.getElementById('page:frm:hdnstrOtherCurrencyRate').value)).toFixed(2)).toString())+'({!strGrantCurrency})';
                    }
                } 
                     
                var TotalCostAll;
                var TotalUnitCostAll;
                var TotalRateAll;
                var TotalCostAllNew;
                var TotalRateAllNew;
                var NumberPerson;
                var NumberPersonNew;
                var levelEffort;
                var levelEffortNew;
                if(SelectedYear == 'Year1'){
                    TotalCostAll = 'txtTotalCostY1First';
                    TotalUnitCostAll = 'txtTotalUnitCostY1First';
                    TotalRateAll = 'txtRateY1First';
                    TotalCostAllNew = 'txtTotalCostY1NewFirst';
                    TotalRateAllNew = 'txtRateY1NewFirst';
                    NumberPerson = 'txtY1NumberFirst';
                    NumberPersonNew = 'txtY1NumberNewFirst';
                    UnitCost = 'txtUnitCostY1First';
                    levelEffort = 'txtY1LevelFirst';
                    levelEffortNew = 'txtY1LevelNewFirst';
                }else if(SelectedYear == 'Year2'){
                    TotalCostAll = 'txtTotalCostY2First';
                    TotalUnitCostAll = 'txtTotalUnitCostY2First';
                    TotalRateAll = 'txtRateY2First';
                    TotalCostAllNew = 'txtTotalCostY2NewFirst';
                    TotalRateAllNew = 'txtRateY2NewFirst';
                    NumberPerson = 'txtY2NumberFirst';
                    NumberPersonNew = 'txtY2NumberNewFirst';
                    UnitCost = 'txtUnitCostY2First';
                    levelEffort = 'txtY2LevelFirst';
                    levelEffortNew = 'txtY2LevelNewFirst';
                }else if(SelectedYear == 'Year3'){
                    TotalCostAll = 'txtTotalCostY3First';
                    TotalUnitCostAll = 'txtTotalUnitCostY3First';
                    TotalRateAll = 'txtRateY3First';
                    TotalCostAllNew = 'txtTotalCostY3NewFirst';
                    TotalRateAllNew = 'txtRateY3NewFirst';
                    NumberPerson = 'txtY3NumberFirst';
                    NumberPersonNew = 'txtY3NumberNewFirst';
                    UnitCost = 'txtUnitCostY3First';
                    levelEffort = 'txtY3LevelFirst';
                    levelEffortNew = 'txtY3LevelNewFirst';
                }else if(SelectedYear == 'Year4'){
                    TotalCostAll = 'txtTotalCostY4First';
                    TotalUnitCostAll = 'txtTotalUnitCostY4First';
                    TotalRateAll = 'txtRateY4First';
                    TotalCostAllNew = 'txtTotalCostY4NewFirst';
                    TotalRateAllNew = 'txtRateY4NewFirst';
                    NumberPerson = 'txtY4NumberFirst';
                    NumberPersonNew = 'txtY4NumberNewFirst';
                    UnitCost = 'txtUnitCostY4First';
                    levelEffort = 'txtY4LevelFirst';
                    levelEffortNew = 'txtY4LevelNewFirst';
                }
                var TotalUcost = 0;
                var TotalQuantity = 0;
                
                for(var i=0;i<size;i++){
                    
                    if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLineFirst:'+i+':'+NumberPerson).value != '' && document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLineFirst:'+i+':'+levelEffort).value != ''){
                        TotalQuantity += (parseFloat(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLineFirst:'+i+':'+NumberPerson).value)) * parseFloat(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLineFirst:'+i+':'+levelEffort).value)));
                    }
                    if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLineFirst:'+i+':'+TotalRateAll).innerHTML == '' &&
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLineFirst:'+i+':'+TotalCostAll).innerHTML == ''){
                            TotalUcost += 0;
                        
                    }else if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLineFirst:'+i+':'+TotalRateAll).innerHTML != ''){
                        TotalUcost += parseFloat(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLineFirst:'+i+':'+TotalRateAll).innerHTML));
                    }else{
                        TotalUcost += parseFloat(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLineFirst:'+i+':'+TotalCostAll).innerHTML));
                    }
                
                
                   /* if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLineFirst:'+i+':'+TotalCostAll).innerHTML == ''){
                        TotalUcost += 0;
                    }else{
                        TotalUcost += parseInt(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLineFirst:'+i+':'+TotalCostAll).innerHTML);
                    }*/
                }
                
                if(document.getElementById('page:frm:rptBudgetLine:'+Index+':'+NumberPersonNew).value != ''  && document.getElementById('page:frm:rptBudgetLine:'+Index+':'+levelEffortNew).value != ''){
                    TotalQuantity += (parseFloat(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':'+NumberPersonNew).value)) * parseFloat(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':'+levelEffortNew).value)));
                }
                
                var TotalnewCost = 0;
                
                if(document.getElementById('page:frm:rptBudgetLine:'+Index+':'+TotalRateAllNew).innerHTML != ''){
                    TotalnewCost = parseInt(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':'+TotalRateAllNew).innerHTML));
                }else if(document.getElementById('page:frm:rptBudgetLine:'+Index+':'+TotalCostAllNew).innerHTML != ''){
                    TotalnewCost = parseInt(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':'+TotalCostAllNew).innerHTML));
                }
                
                if(document.getElementById('page:frm:rptBudgetLine:'+Index+':'+TotalUnitCostAll).innerHTML != ''){
                    document.getElementById('page:frm:rptBudgetLine:'+Index+':'+TotalUnitCostAll).innerHTML = '';
                }
                if(TotalnewCost == ''){
                    TotalnewCost = 0;
                }
                if(TotalnewCost != 0){
                    TotalUcost = TotalUcost + TotalnewCost;
                }
                if(TotalUcost == 0  || isNaN(TotalUcost)){
                    document.getElementById('page:frm:rptBudgetLine:'+Index+':'+TotalUnitCostAll).innerHTML = '';
                }else{
                     if(TotalQuantity == 0 || isNaN(TotalQuantity)){
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':'+UnitCost).innerHTML = ''; 
                    }
                    if(TotalQuantity != 0){
                        var TotalCostRe = 0;
                        TotalQuantity = parseFloat(TotalQuantity)/100;
                        TotalCostRe = parseFloat((parseFloat(TotalUcost) / parseFloat(TotalQuantity)));
                        TotalCostRe = (TotalCostRe/4).toFixed(2);
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':'+UnitCost).innerHTML = addCommas(TotalCostRe.toString());
                    }
                    TotalUcost = TotalUcost.toFixed(2);
                    document.getElementById('page:frm:rptBudgetLine:'+Index+':'+TotalUnitCostAll).innerHTML = addCommas(TotalUcost.toString());
                }
            
            }
            
            
            function CalculateTotalCostFirstNew(Cost,Charges,TotalSalary,Level,Number,TotalCost,Currency,CurrencyRate,Index,size,SelectedYear,TotalSalaryRate){
                
                var txtCost = document.getElementById(Cost).value;
                var txtCharges = document.getElementById(Charges).value;
                
                var txtLevel = document.getElementById(Level).value;
                var txtNumber = document.getElementById(Number).value;
                
                txtCost = RemoveComma(txtCost);
                txtCharges = RemoveComma(txtCharges);
                txtLevel = RemoveComma(txtLevel);
                 txtLevel = parseFloat(Math.floor(parseFloat(txtLevel)));
                txtNumber = RemoveComma(txtNumber);
                txtNumber = parseFloat(Math.floor(parseFloat(txtNumber)));
                
                if(txtCost == '' || txtCost == null) txtCost = 0;
                if(txtCharges == '' || txtCharges == null) txtCharges = 0;
                if(txtLevel == '' || txtLevel == null) txtLevel = 0;
                if(txtNumber == '' || txtNumber == null) txtNumber = 0;
                
                var txtTotalSalary = parseFloat(parseFloat(txtCost)) + parseFloat(parseFloat(txtCharges));
                
                if(txtTotalSalary == 0 || isNaN(txtTotalSalary)){
                    document.getElementById(TotalSalary).innerHTML = '';
                    document.getElementById(TotalSalaryRate).innerHTML = '';
                }else{
                    document.getElementById(TotalSalary).innerHTML = addCommas((txtTotalSalary.toFixed(2)).toString())+ '('+document.getElementById(Currency).options[document.getElementById(Currency).selectedIndex].text+')';
                }
                if(document.getElementById(Currency).options[document.getElementById(Currency).selectedIndex].text == '{!strLocalCurrency}'){
                        document.getElementById(TotalSalaryRate).innerHTML = addCommas(((txtTotalSalary * parseFloat(document.getElementById('page:frm:hdnstrLocalCurrencyRate').value)).toFixed(2)).toString())+'({!strGrantCurrency})';
                    }
                    if(document.getElementById(Currency).options[document.getElementById(Currency).selectedIndex].text == '{!strOtherCurrency}'){
                       document.getElementById(TotalSalaryRate).innerHTML = addCommas(((txtTotalSalary * parseFloat(document.getElementById('page:frm:hdnstrOtherCurrencyRate').value)).toFixed(2)).toString())+'({!strGrantCurrency})';
                    }
                var txtTotalCost = txtTotalSalary * txtLevel * txtNumber;   
                if(txtTotalCost == 0 || isNaN(txtTotalCost)){
                    document.getElementById(TotalCost).innerHTML = '';
                }else{
                    txtTotalCost = (txtTotalCost/100).toFixed(2);
                    document.getElementById(TotalCost).innerHTML = addCommas(txtTotalCost.toString())+ '('+document.getElementById(Currency).options[document.getElementById(Currency).selectedIndex].text+')';
                    if(document.getElementById(Currency).options[document.getElementById(Currency).selectedIndex].text == '{!strLocalCurrency}'){
                        document.getElementById(CurrencyRate).innerHTML = addCommas(((txtTotalCost * parseFloat(document.getElementById('page:frm:hdnstrLocalCurrencyRate').value)).toFixed(2)).toString())+'({!strGrantCurrency})';
                    }
                    if(document.getElementById(Currency).options[document.getElementById(Currency).selectedIndex].text == '{!strOtherCurrency}'){
                        document.getElementById(CurrencyRate).innerHTML = addCommas(((txtTotalCost * parseFloat(document.getElementById('page:frm:hdnstrOtherCurrencyRate').value)).toFixed(2)).toString())+'({!strGrantCurrency})';
                    }
                }
                var txtTotalCostFinal = 0;
                if(document.getElementById(CurrencyRate).innerHTML != ''){
                    txtTotalCostFinal = parseFloat(RemoveComma(document.getElementById(CurrencyRate).innerHTML));
                }else{
                    txtTotalCostFinal = txtTotalCost;
                }
                console.log('txtTotalCost'+txtTotalCost);
                var TotalUcost = 0;
                
                var TotalCostAll;
                var TotalUnitCostAll;
                var TotalRateAll;
                var TotalCostAllNew;
                var TotalRateAllNew;
                var NumberPerson;
                var NumberPersonNew;
                var levelEffort;
                var levelEffortNew;
                if(SelectedYear == 'Year1'){
                    TotalCostAll = 'txtTotalCostY1First';
                    TotalUnitCostAll = 'txtTotalUnitCostY1First';
                    TotalRateAll = 'txtRateY1First';
                    TotalCostAllNew = 'txtTotalCostY1NewFirst';
                    TotalRateAllNew = 'txtRateY1NewFirst';
                    NumberPerson = 'txtY1NumberFirst';
                    NumberPersonNew = 'txtY1NumberNewFirst'
                    UnitCost = 'txtUnitCostY1First';
                    levelEffort = 'txtY1LevelFirst';
                    levelEffortNew = 'txtY1LevelNewFirst';
                }else if(SelectedYear == 'Year2'){
                    TotalCostAll = 'txtTotalCostY2First';
                    TotalUnitCostAll = 'txtTotalUnitCostY2First';
                    TotalRateAll = 'txtRateY2First';
                    TotalCostAllNew = 'txtTotalCostY2NewFirst';
                    TotalRateAllNew = 'txtRateY2NewFirst';
                    NumberPerson = 'txtY2NumberFirst';
                    NumberPersonNew = 'txtY2NumberNewFirst'
                    UnitCost = 'txtUnitCostY2First';
                    levelEffort = 'txtY2LevelFirst';
                    levelEffortNew = 'txtY2LevelNewFirst';
                }else if(SelectedYear == 'Year3'){
                    TotalCostAll = 'txtTotalCostY3First';
                    TotalUnitCostAll = 'txtTotalUnitCostY3First';
                    TotalRateAll = 'txtRateY3First';
                    TotalCostAllNew = 'txtTotalCostY3NewFirst';
                    TotalRateAllNew = 'txtRateY3NewFirst';
                    NumberPerson = 'txtY3NumberFirst';
                    NumberPersonNew = 'txtY3NumberNewFirst'
                    UnitCost = 'txtUnitCostY3First';
                    levelEffort = 'txtY3LevelFirst';
                    levelEffortNew = 'txtY3LevelNewFirst';
                }else if(SelectedYear == 'Year4'){
                    TotalCostAll = 'txtTotalCostY4First';
                    TotalUnitCostAll = 'txtTotalUnitCostY4First';
                    TotalRateAll = 'txtRateY4First';
                    TotalCostAllNew = 'txtTotalCostY4NewFirst';
                    TotalRateAllNew = 'txtRateY4NewFirst';
                    NumberPerson = 'txtY4NumberFirst';
                    NumberPersonNew = 'txtY4NumberNewFirst'
                    UnitCost = 'txtUnitCostY4First';
                    levelEffort = 'txtY4LevelFirst';
                    levelEffortNew = 'txtY4LevelNewFirst';
                }
                var TotalQuantity = 0;
                if(size > 0){
                    TotalUcost = 0;
                    
                    for(var i=0;i<size;i++){  
                        if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLineFirst:'+i+':'+NumberPerson).value != ''  && document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLineFirst:'+i+':'+levelEffort).value != ''){
                            TotalQuantity += (parseFloat(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLineFirst:'+i+':'+NumberPerson).value)) * parseFloat(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLineFirst:'+i+':'+levelEffort).value)));
                        }
                        
                        if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLineFirst:'+i+':'+TotalRateAll).innerHTML == '' &&
                            document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLineFirst:'+i+':'+TotalCostAll).innerHTML == ''){
                                TotalUcost += 0;
                        }else if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLineFirst:'+i+':'+TotalRateAll).innerHTML != '') {
                            TotalUcost += parseFloat(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLineFirst:'+i+':'+TotalRateAll).innerHTML));
                        }else {
                            TotalUcost += parseFloat(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLineFirst:'+i+':'+TotalCostAll).innerHTML));
                        }
                       /* if(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLineFirst:'+i+':'+TotalCostAll).innerHTML == ''){
                        TotalUcost += 0;
                    }else{
                        TotalUcost += parseInt(document.getElementById('page:frm:rptBudgetLine:'+Index+':rptBudgetLineFirst:'+i+':'+TotalCostAll).innerHTML);
                    }*/
                    }                    
                    TotalUcost = TotalUcost + txtTotalCostFinal;
                    //TotalUcost = TotalUcost + txtTotalCost;
                }else{
                    
                    TotalUcost = txtTotalCostFinal;
                   //TotalUcost = txtTotalCost;
                }
                
                if(document.getElementById('page:frm:rptBudgetLine:'+Index+':'+NumberPersonNew).value != '' && document.getElementById('page:frm:rptBudgetLine:'+Index+':'+levelEffortNew).value != ''){
                    
                    TotalQuantity += (parseFloat(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':'+NumberPersonNew).value)) * parseFloat(RemoveComma(document.getElementById('page:frm:rptBudgetLine:'+Index+':'+levelEffortNew).value)));
                    
                }
                if(document.getElementById('page:frm:rptBudgetLine:'+Index+':'+TotalUnitCostAll).innerHTML != ''){
                    document.getElementById('page:frm:rptBudgetLine:'+Index+':'+TotalUnitCostAll).innerHTML = '';
                }
                if(TotalUcost == 0 || isNaN(TotalUcost)){
                    document.getElementById('page:frm:rptBudgetLine:'+Index+':'+TotalUnitCostAll).innerHTML = '';
                }else{
                console.log('TotalQuantity '+TotalQuantity);
                    TotalUcost = TotalUcost.toFixed(2);
                     if(TotalQuantity == 0 || isNaN(TotalQuantity)){
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':'+UnitCost).innerHTML = ''; 
                    }
                    if(TotalQuantity != 0){
                        var TotalCostRe = 0;
                        TotalQuantity = parseFloat(TotalQuantity)/100;
                        TotalCostRe = parseFloat((parseFloat(TotalUcost) / parseFloat(TotalQuantity)));
                        console.log('TotalCostRe '+TotalCostRe);
                        TotalCostRe = (TotalCostRe/4).toFixed(2);
                        document.getElementById('page:frm:rptBudgetLine:'+Index+':'+UnitCost).innerHTML = addCommas(TotalCostRe.toString());
                    }            
                    document.getElementById('page:frm:rptBudgetLine:'+Index+':'+TotalUnitCostAll).innerHTML = addCommas(TotalUcost.toString());
                   
                }
            }
        function RemoveComma(CostValue){
                CostValue += '';
                var ReComma = new RegExp("\\,","g");
                var ReQuate = new RegExp("\\'","g");
                CostValue = CostValue.replace(ReComma,"");
                CostValue = CostValue.replace(ReQuate,"");
                CostValue = CostValue.replace(",.",".");
                CostValue = CostValue.replace("'.",".");
                return CostValue;
            }
       function addCommas(nStr)
            {
                
                nStr += '';
                x = nStr.split('.');
                x1 = x[0];
                x2 = x.length > 1 ? '.' + x[1] : '';
                var rgx = /(\d+)(\d{3})/;
                while (rgx.test(x1)) {
                    x1 = x1.replace(rgx, '$1' + ',' + '$2');
                }
                return x1 + x2;
            }
        function SaveAssumptionRecords(TrId,closeAss){
                
                if(document.getElementById(TrId).style.display == 'none'){
                    actSaveAssumption(closeAss,false);
                    return false;
                }else{
                   // actSaveAssumptionNew(closeAss);
                    actSaveAssumption(closeAss,true);
                    return false;
                }
            }
        
        function oncompleteAssumption(){
            document.getElementById('NewAssumptionTR{!Count}').style.display = 'none';
            document.getElementById('AddButtonTD').style.display = '';
        }
        
        function ChangeCurrencyRate(Code,ChangeIndex,isNew){
            console.log(isNew);
            if(isNew == 'false'){
            actChangeCurrencyRateFromCode(Code,ChangeIndex,isNew);
            }else{
            console.log('in Else Condition');
            actChangeCurrencyRateFromCodeNew(Code,ChangeIndex,isNew);
            }
            return false;
        }
        function ChangeCurrencyRateNew(Code){
            actChangeCurrencyRateFromCodeNew(Code);
            return false;
        }
        function showRows(showNewRow){
            if(showNewRow == true){
                if(globalTR != '')document.getElementById(globalTR).style.display = '';
                document.getElementById(globalAssUnitMeasure).innerHTML = globalBLUnitMeasure;
                if(globalBtn != '')document.getElementById(globalBtn).style.display = 'none';
                if(globalhide != '')document.getElementById(globalhide).style.display = '';
            }else{
                if(globalTR != '')document.getElementById(globalTR).style.display = 'none';
                document.getElementById(globalAssUnitMeasure).innerHTML = globalBLUnitMeasure;
                if(globalBtn != '')document.getElementById(globalBtn).style.display = '';
                if(globalhide != '')document.getElementById(globalhide).style.display = 'none';
                
             }
            }
            
        function displayApplyButton(AssmptionSet,Index){                
            if(AssmptionSet.value != ''){
                document.getElementById('page:frm:rptBudgetLine:'+Index+':btnApply').style.display = '';
            }else{
                document.getElementById('page:frm:rptBudgetLine:'+Index+':btnApply').style.display = 'none';
            }
            return false;
        }
    </script>  
    
      
    <style type="text/css">
        .custAssumptionPopup{
                    background-color: white;
                    border-width: 0px;
                    border-radius:10px;
                    border-style: solid;
                    /*z-index: 9999;*/
                    z-index: 115;
                    left: 1%;
                    padding:10px;
                    position: absolute;
                    top:30%;
                    /*width:91%;*/
                   
                }
        .popupAssumptionBackground{
                    background-color:black;
                    opacity: 0.20;
                    filter: alpha(opacity = 20);
                    position: fixed;
                    width: 100%;
                    height: 100%;
                    /*z-index: 9998;*/
                    z-index: 100;
                    top: 0;
                    left: 0;
                   
                }
        .custDialogPopup{
            background-color: white;
            border-width: 0px;
            border-radius:10px;
            border-style: solid;
            /*z-index: 9999;*/
            z-index: 51;
            left: 6%;
            padding:10px;
            position: absolute;
            top:50%;               
        }
        .popupDialogBackground{
            background-color:black;
            opacity: 0.20;
            filter: alpha(opacity = 20);
            position: absolute;
            width: 100%;
            height: 100%;
            /*z-index: 9998;*/
            z-index: 50;
            top: 0;
            left: 0;               
        }
    </style>
    </apex:form> 
</apex:page>